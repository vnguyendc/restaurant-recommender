"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[619],{32138:(e,t,a)=>{var o,n;a(88674),a(41539);var r=a(77077),i=l(a(97548)),c=l(a(2832));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(55455),a(12030),a(5547)],void 0===(n=function(e,t,a,o,n,l){return l.Nodes["coll-cast"]||(n.Browser.Nodes["coll-cast"]=n.Browser.Collection.extend({node:"cast",label:e("Casts"),type:"coll-cast",columns:["name","description"]})),l.Nodes.cast||(n.Browser.Nodes.cast=n.Browser.Node.extend({parent_type:"database",type:"cast",sqlAlterHelp:"sql-altercast.html",sqlCreateHelp:"sql-createcast.html",dialogHelp:t("help.static",{filename:"cast_dialog.html"}),canDrop:!0,canDropCascade:!0,label:e("Cast"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_cast_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"},enable:l.Nodes.database.is_conn_allow},{name:"create_cast_on_coll",node:"coll-cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"}},{name:"create_cast",node:"cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"}}]))},getSchema:function(e,t){var a=this;return new i.default({getTypeOptions:function(){return(0,r.getNodeAjaxOptions)("get_type",a,e,t)},getFuncOptions:function(a,o){return new Promise((function(n,r){var i=(0,c.default)(),s=l.Nodes.cast.generate_url.apply(l.Nodes.cast,[null,"get_functions",t,!1,e]),d={srctyp:a,trgtyp:o};null!=a&&""!=a&&null!=o&&""!=o?i.post(s,d).then((function(e){d=e.data.data,n(d)})).catch((function(e){r(e)})):n(d=[])}))}})}})),l.Nodes["coll-cast"]}.apply(t,o))||(e.exports=n)},22226:(e,t,a)=>{var o,n;a(68309);var r,i=(r=a(18272))&&r.__esModule?r:{default:r},c=a(77077);o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n,r){return r.Nodes["coll-event_trigger"]||(n.Browser.Nodes["coll-event_trigger"]=n.Browser.Collection.extend({node:"event_trigger",label:e("Event Trigger"),type:"coll-event_trigger",columns:["name","eventowner","comment"],canDrop:!0,canDropCascade:!1})),r.Nodes.event_trigger||(n.Browser.Nodes.event_trigger=n.Browser.Node.extend({parent_type:"database",type:"event_trigger",sqlAlterHelp:"sql-altereventtrigger.html",sqlCreateHelp:"sql-createeventtrigger.html",dialogHelp:t("help.static",{filename:"event_trigger_dialog.html"}),label:e("Event Trigger"),hasSQL:!0,hasDepends:!0,canDrop:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_event_trigger_on_coll",node:"coll-event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"}},{name:"create_event_trigger",node:"event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"}},{name:"create_event_trigger",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"},enable:r.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){var a=this;return new i.default({role:function(){return(0,c.getNodeListByName)("role",e,t)},function_names:function(){return(0,c.getNodeAjaxOptions)("fopts",a,e,t,{cacheLevel:"trigger_function"})}},{eventowner:r.serverInfo[e.server._id].user.name})}})),r.Nodes["coll-event_trigger"]}.apply(t,o))||(e.exports=n)},61561:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=(r=a(72876))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n,r){return r.Nodes["coll-extension"]||(n.Browser.Nodes["coll-extension"]=n.Browser.Collection.extend({node:"extension",label:e("Extensions"),type:"coll-extension",columns:["name","owner","comment"]})),r.Nodes.extension||(n.Browser.Nodes.extension=n.Browser.Node.extend({parent_type:"database",type:"extension",sqlAlterHelp:"sql-alterextension.html",sqlCreateHelp:"sql-createextension.html",dialogHelp:t("help.static",{filename:"extension_dialog.html"}),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,label:e("Extension"),Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_extension_on_coll",node:"coll-extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"}},{name:"create_extension",node:"extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"}},{name:"create_extension",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"},enable:r.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){var a=n.Browser.Nodes.extension;return new c.default({role:function(){return(0,i.getNodeListByName)("role",e,t)},extensionsList:function(){return(0,i.getNodeAjaxOptions)("avails",a,e,t,{cacheLevel:"server"},(function(e){var t=[];return e&&o.isArray(e)&&o.each(e,(function(e){t.push({label:e.name,value:e.name,data:e})})),t}))},schemaList:function(){return(0,i.getNodeListByName)("schema",e,t)}})}})),r.Nodes["coll-extension"]}.apply(t,o))||(e.exports=n)},26772:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=a(40345),l=(r=a(30860))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r){return r.Nodes["coll-foreign_server"]||(n.Browser.Nodes["coll-foreign_server"]=n.Browser.Collection.extend({node:"foreign_server",label:e("Foreign Servers"),type:"coll-foreign_server",columns:["name","fsrvowner","description"]})),r.Nodes.foreign_server||(n.Browser.Nodes.foreign_server=n.Browser.Node.extend({parent_type:"foreign_data_wrapper",type:"foreign_server",sqlAlterHelp:"sql-alterserver.html",sqlCreateHelp:"sql-createserver.html",dialogHelp:t("help.static",{filename:"foreign_server_dialog.html"}),label:e("Foreign Server"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_foreign_server_on_coll",node:"coll-foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}},{name:"create_foreign_server",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}},{name:"create_foreign_server",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}}]))},getSchema:function(e,t){var a=this;return new l.default((function(o){return(0,c.getNodePrivilegeRoleSchema)(a,e,t,o)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)}},{fsrvowner:r.serverInfo[e.server._id].user.name})}})),r.Nodes["coll-foreign_server"]}.apply(t,o))||(e.exports=n)},92971:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=(r=a(91161))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(5547)],void 0===(n=function(e,t,a,o,n,r,l){return r.Nodes["coll-user_mapping"]||(n.Browser.Nodes["coll-user_mapping"]=n.Browser.Collection.extend({node:"user_mapping",label:e("User Mappings"),type:"coll-user_mapping",columns:["name"]})),r.Nodes.user_mapping||(n.Browser.Nodes.user_mapping=n.Browser.Node.extend({parent_type:"foreign_server",type:"user_mapping",sqlAlterHelp:"sql-alterusermapping.html",sqlCreateHelp:"sql-createusermapping.html",dialogHelp:t("help.static",{filename:"user_mapping_dialog.html"}),label:e("User Mapping"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_user_mapping_on_coll",node:"coll-user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}},{name:"create_user_mapping",node:"user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}},{name:"create_user_mapping",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}}]))},getSchema:function(e,t){return new c.default({role:function(){return(0,i.getNodeListByName)("role",e,t,{},(function(){return!0}),(function(e){return e.unshift({label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-role"},{label:"PUBLIC",value:"PUBLIC",image:"icon-role"}),e}))}},{name:r.serverInfo[e.server._id].user.name})},model:n.Browser.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var a=0===o.size(e);if(a){var i=r.serverInfo[t.node_info.server._id].user;this.set({name:i.name},{silent:!0})}n.Browser.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("User"),type:"text",control:l.NodeListByNameControl,node:"role",mode:["edit","create","properties"],select2:{allowClear:!1},disabled:function(e){return!e.isNew()},transform:function(){var e=this,t=e.field.get("schema_node"),a=l.NodeListByNameControl.prototype.defaults.transform.apply(this,arguments);return a.unshift({label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-"+t.type},{label:"PUBLIC",value:"PUBLIC",image:"icon-"+t.type}),a}},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]}]})})),r.Nodes["coll-user_mapping"]}.apply(t,o))||(e.exports=n)},79487:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=a(40345),l=(r=a(35626))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(55112),a(33883),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n){return n.Nodes["coll-foreign_data_wrapper"]||(n.Nodes["coll-foreign_data_wrapper"]=n.Collection.extend({node:"foreign_data_wrapper",label:e("Foreign Data Wrappers"),type:"coll-foreign_data_wrapper",columns:["name","fdwowner","description"]})),n.Nodes.foreign_data_wrapper||(n.Nodes.foreign_data_wrapper=n.Node.extend({parent_type:"database",type:"foreign_data_wrapper",sqlAlterHelp:"sql-alterforeigndatawrapper.html",sqlCreateHelp:"sql-createforeigndatawrapper.html",dialogHelp:t("help.static",{filename:"foreign_data_wrapper_dialog.html"}),label:e("Foreign Data Wrapper"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_foreign_data_wrapper_on_coll",node:"coll-foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"},enable:n.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){var a=this;return new l.default((function(o){return(0,c.getNodePrivilegeRoleSchema)(a,e,t,o)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)},fdwhan:function(){return(0,i.getNodeAjaxOptions)("get_handlers",a,e,t)},fdwvalue:function(){return(0,i.getNodeAjaxOptions)("get_validators",a,e,t)}},{fdwowner:n.serverInfo[e.server._id].user.name})}})),n.Nodes.foreign_data_wrapper}.apply(t,o))||(e.exports=n)},9603:(e,t,a)=>{var o,n,r,i=a(77077),c=(r=a(80861))&&r.__esModule?r:{default:r},l=a(40345);o=[a(91669),a(28008),a(19755),a(55112),a(33883),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n){return n.Nodes["coll-language"]||(n.Nodes["coll-language"]=n.Collection.extend({node:"language",label:e("Languages"),type:"coll-language",columns:["name","lanowner","description"]})),n.Nodes.language||(n.Nodes.language=n.Node.extend({parent_type:"database",type:"language",sqlAlterHelp:"sql-alterlanguage.html",sqlCreateHelp:"sql-createlanguage.html",dialogHelp:t("help.static",{filename:"language_dialog.html"}),label:e("Language"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_language_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"},enable:n.Nodes.database.is_conn_allow},{name:"create_language_on_coll",node:"coll-language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"}},{name:"create_language",node:"language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"}}]))},getSchema:function(e,t){var a=this;return new c.default((function(o){return(0,l.getNodePrivilegeRoleSchema)(a,e,t,o)}),{lan_functions:function(){return(0,i.getNodeAjaxOptions)("get_functions",a,e,t)},templates_data:function(){return(0,i.getNodeAjaxOptions)("get_templates",a,e,t)},role:function(){return(0,i.getNodeListByName)("role",e,t)}},{node_info:e.server})}})),n.Nodes["coll-language"]}.apply(t,o))||(e.exports=n)},55520:(e,t,a)=>{var o,n,r,i=a(77077),c=(r=a(78047))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r){return r.Nodes["coll-publication"]||(r.Nodes["coll-publication"]=r.Collection.extend({node:"publication",label:e("Publications"),type:"coll-publication",columns:["name","pubowner","pubtable","all_table"]})),r.Nodes.publication||(r.Nodes.publication=r.Node.extend({parent_type:"database",type:"publication",sqlAlterHelp:"sql-alterpublication.html",sqlCreateHelp:"sql-createpublication.html",dialogHelp:t("help.static",{filename:"publication_dialog.html"}),label:e("Publication"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_publication_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"},enable:r.Nodes.database.canCreate},{name:"create_publication_on_coll",node:"coll-publication",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"}},{name:"create_publication",node:"publication",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"}}]))},getSchema:function(e,t){var a=this;return new c.default({publicationTable:function(){return(0,i.getNodeAjaxOptions)("get_tables",a,e,t)},role:function(){return(0,i.getNodeListByName)("role",e,t)}},{node_info:e.server})}})),r.Nodes["coll-publication"]}.apply(t,o))||(e.exports=n)},86048:(e,t,a)=>{var o,n,r,i=(r=a(51698))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(94405),a(5547)],void 0===(n=function(e,t,a,o,n,r,c){return r.Nodes["coll-aggregate"]||(n.Browser.Nodes["coll-aggregate"]=n.Browser.Collection.extend({node:"aggregate",label:e("Aggregates"),type:"coll-aggregate",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),r.Nodes.aggregate||(n.Browser.Nodes.aggregate=c.SchemaChildNode.extend({type:"aggregate",sqlAlterHelp:"sql-alteraggregate.html",sqlCreateHelp:"sql-createaggregate.html",label:e("Aggregate"),collection_type:"coll-aggregate",hasSQL:!0,hasDepends:!1,canDrop:!1,canDropCascade:!1,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new i.default}})),r.Nodes.aggregate}.apply(t,o))||(e.exports=n)},79099:(e,t,a)=>{var o,n,r,i=(r=a(96132))&&r.__esModule?r:{default:r};o=[a(91669),a(19755),a(66419),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n){return n.Nodes["coll-catalog_object_column"]||(o.Browser.Nodes["coll-catalog_object_column"]=o.Browser.Collection.extend({node:"catalog_object_column",label:e("catalog_object_column"),type:"coll-catalog_object_column",columns:["attname","attnum","cltype","description"],canDrop:!1,canDropCascade:!1})),n.Nodes.catalog_object_column||(o.Browser.Nodes.catalog_object_column=o.Browser.Node.extend({parent_type:"catalog_object",type:"catalog_object_column",label:e("catalog_object_column"),hasSQL:!1,hasScriptTypes:[],hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new i.default}})),n.Nodes.catalog_object_column}.apply(t,o))||(e.exports=n)},82319:(e,t,a)=>{var o,n,r,i=(r=a(40718))&&r.__esModule?r:{default:r};o=[a(91669),a(19755),a(66419),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n){return n.Nodes["coll-catalog_object"]||(o.Browser.Nodes["coll-catalog_object"]=o.Browser.Collection.extend({node:"catalog_object",label:e("Catalog Objects"),type:"coll-catalog_object",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),n.Nodes.catalog_object||(o.Browser.Nodes.catalog_object=o.Browser.Node.extend({parent_type:"catalog",type:"catalog_object",label:e("Catalog Object"),hasSQL:!1,hasScriptTypes:[],hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new i.default}})),n.Nodes.catalog_object}.apply(t,o))||(e.exports=n)},78030:(e,t,a)=>{var o,n;a(68309);var r,i=(r=a(6624))&&r.__esModule?r:{default:r},c=a(77077);o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s){return r.Nodes["coll-collation"]||(n.Browser.Nodes["coll-collation"]=n.Browser.Collection.extend({node:"collation",label:e("Collations"),type:"coll-collation",columns:["name","owner","description"],canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:s.isTreeItemOfChildOfSchema})),r.Nodes.collation||(n.Browser.Nodes.collation=l.SchemaChildNode.extend({type:"collation",sqlAlterHelp:"sql-altercollation.html",sqlCreateHelp:"sql-createcollation.html",dialogHelp:t("help.static",{filename:"collation_dialog.html"}),label:e("Collation"),collection_type:"coll-collation",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_collation_on_coll",node:"coll-collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_collation",node:"collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_collation",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var a=n.Browser.Nodes.collation;return new i.default({rolesList:function(){return(0,c.getNodeListByName)("role",e,t,{cacheLevel:"server"})},schemaList:function(){return(0,c.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},collationsList:function(){return(0,c.getNodeAjaxOptions)("get_collations",a,e,t,{cacheLevel:"server"})}},{owner:r.serverInfo[e.server._id].user.name,schema:"schema"in e?e.schema.label:""})}})),r.Nodes.collation}.apply(t,o))||(e.exports=n)},14767:(e,t,a)=>{var o,n,r,i=(r=a(37055))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,c){return r.Nodes["coll-domain_constraints"]||(n.Browser.Nodes["coll-domain_constraints"]=n.Browser.Collection.extend({node:"domain_constraints",label:e("Domain Constraints"),type:"coll-domain_constraints",columns:["name","description"],canDrop:c.isTreeItemOfChildOfSchema,canDropCascade:!1})),r.Nodes.domain_constraints||(n.Browser.Nodes.domain_constraints=r.Node.extend({type:"domain_constraints",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-alterdomain.html",dialogHelp:t("help.static",{filename:"domain_constraint_dialog.html"}),label:e("Domain Constraints"),collection_type:"coll-domain_constraints",hasSQL:!0,hasDepends:!0,parent_type:["domain"],Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_domain_on_coll",node:"coll-domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain_constraints",node:"domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain_constraints",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!1},enable:"canCreate"}]))},canDrop:c.isTreeItemOfChildOfSchema,getSchema:function(){return new i.default}})),r.Nodes.domain}.apply(t,o))||(e.exports=n)},87091:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=(r=a(97570))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(72316),a(55112),a(33883),a(12030),a(71158),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s,d,u,p){return l.Nodes["coll-domain"]||(l.Nodes["coll-domain"]=l.Collection.extend({node:"domain",label:e("Domains"),type:"coll-domain",columns:["name","owner","description"],canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),l.Nodes.domain||(l.Nodes.domain=u.SchemaChildNode.extend({type:"domain",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-createdomain.html",dialogHelp:t("help.static",{filename:"domain_dialog.html"}),label:e("Domain"),collection_type:"coll-domain",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_domain_on_coll",node:"coll-domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new c.default({role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"})},basetype:function(){return(0,i.getNodeAjaxOptions)("get_types",a,e,t,{cacheNode:"type"})},collation:function(){return(0,i.getNodeAjaxOptions)("get_collations",a,e,t,{cacheLevel:"database",cacheNode:"schema"})}},{owner:l.serverInfo[e.server._id].user.name,schema:t.label,basensp:t.label})}})),l.Nodes.domain}.apply(t,o))||(e.exports=n)},42654:(e,t,a)=>{var o,n;a(68309);var r=a(77077),i=a(14511),c=a(40345),l=d(a(49289)),s=d(a(96486));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(72316),a(55112),a(33883),a(71158),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,d,u,p,m){return d.Nodes["coll-foreign_table"]||(d.Nodes["coll-foreign_table"]=d.Collection.extend({node:"foreign_table",label:e("Foreign Tables"),type:"coll-foreign_table",columns:["name","owner","description"],canDrop:m.isTreeItemOfChildOfSchema,canDropCascade:m.isTreeItemOfChildOfSchema})),d.Nodes.foreign_table||(d.Nodes.foreign_table=p.SchemaChildNode.extend({type:"foreign_table",sqlAlterHelp:"sql-alterforeigntable.html",sqlCreateHelp:"sql-createforeigntable.html",dialogHelp:t("help.static",{filename:"foreign_table_dialog.html"}),label:e("Foreign Table"),collection_type:"coll-foreign_table",hasSQL:!0,hasDepends:!0,width:d.stdW.md+"px",hasScriptTypes:["create","select","insert","update","delete"],parent_type:["schema"],Init:function(){this.initialized||(this.initialized=!0,d.add_menus([{name:"create_foreign_table_on_coll",node:"coll-foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_foreign_table",node:"foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_foreign_table",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new l.default((function(a){return(0,c.getNodePrivilegeRoleSchema)("",e,t,a)}),(function(){return(0,i.getNodeVariableSchema)(a,e,t,!1,!1)}),(function(a){return(0,r.getNodeAjaxOptions)("get_columns",d.Nodes.foreign_table,e,t,{urlParams:a,useCache:!1})}),{role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},foreignServers:function(){return(0,r.getNodeAjaxOptions)("get_foreign_servers",a,e,t,{cacheLevel:"database"},(function(e){return s.default.reject(e,(function(e){return""==e.label||null==e.label}))}))},tables:function(){return(0,r.getNodeAjaxOptions)("get_tables",a,e,t,{cacheLevel:"database"})},nodeInfo:e,nodeData:t,pgBrowser:d},{owner:d.serverInfo[e.server._id].user.name,basensp:e.schema?e.schema.label:""})}})),d.Nodes.foreign_table}.apply(t,o))||(e.exports=n)},17195:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=(r=a(22265))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(72316),a(55112),a(33883),a(12030),a(71158),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s,d,u,p){return l.Nodes["coll-fts_configuration"]||(r.Browser.Nodes["coll-fts_configuration"]=r.Browser.Collection.extend({node:"fts_configuration",label:e("FTS Configurations"),type:"coll-fts_configuration",columns:["name","description"],canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),l.Nodes.fts_configuration||(r.Browser.Nodes.fts_configuration=u.SchemaChildNode.extend({type:"fts_configuration",sqlAlterHelp:"sql-altertsconfig.html",sqlCreateHelp:"sql-createtsconfig.html",dialogHelp:t("help.static",{filename:"fts_configuration_dialog.html"}),label:e("FTS Configuration"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_fts_configuration_on_schema",node:"schema",module:this,category:"create",priority:4,applies:["object","context"],callback:"show_obj_properties",label:e("FTS Configuration..."),icon:"wcTabIcon icon-fts_configuration",data:{action:"create"},enable:"canCreate"},{name:"create_fts_configuration_on_coll",module:this,priority:4,node:"coll-fts_configuration",applies:["object","context"],callback:"show_obj_properties",category:"create",label:e("FTS Configuration..."),data:{action:"create"},icon:"wcTabIcon icon-fts_configuration",enable:"canCreate"},{name:"create_fts_configuration",node:"fts_configuration",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Configuration..."),data:{action:"create"},icon:"wcTabIcon icon-fts_configuration",enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new c.default({role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListById)(l.Nodes.schema,e,t)},parsers:function(){return(0,i.getNodeAjaxOptions)("parsers",a,e,t)},copyConfig:function(){return(0,i.getNodeAjaxOptions)("copyConfig",a,e,t)},tokens:function(){return(0,i.getNodeAjaxOptions)("tokens",a,e,t,{urlWithId:!0})},dictionaries:function(){return(0,i.getNodeAjaxOptions)("dictionaries",a,e,t,{cacheLevel:"fts_configuration",cacheNode:"fts_configuration"})}},{owner:l.serverInfo[e.server._id].user.name,schema:t._id})}})),l.Nodes["coll-fts_configuration"]}.apply(t,o))||(e.exports=n)},53794:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=(r=a(81629))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s,d){return r.Nodes["coll-fts_dictionary"]||(n.Browser.Nodes["coll-fts_dictionary"]=n.Browser.Collection.extend({node:"fts_dictionary",label:e("FTS Dictionaries"),type:"coll-fts_dictionary",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),r.Nodes.fts_dictionary||(n.Browser.Nodes.fts_dictionary=s.SchemaChildNode.extend({type:"fts_dictionary",sqlAlterHelp:"sql-altertsdictionary.html",sqlCreateHelp:"sql-createtsdictionary.html",dialogHelp:t("help.static",{filename:"fts_dictionary_dialog.html"}),label:e("FTS Dictionary"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_fts_dictionary_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Dictionary..."),icon:"wcTabIcon icon-fts_dictionary",data:{action:"create"},enable:"canCreate"},{name:"create_fts_dictionary_on_coll",node:"coll-fts_dictionary",module:this,applies:["object","context"],priority:4,callback:"show_obj_properties",category:"create",label:e("FTS Dictionary..."),data:{action:"create"},icon:"wcTabIcon icon-fts_dictionary",enable:"canCreate"},{name:"create_fts_dictionary",node:"fts_dictionary",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Dictionary..."),icon:"wcTabIcon icon-fts_dictionary",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new c.default({role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListById)(r.Nodes.schema,e,t)},fts_template:function(){return(0,i.getNodeAjaxOptions)("fetch_templates",a,e,t,{cacheNode:"fts_template"})}},{owner:r.serverInfo[e.server._id].user.name,schema:t._id})}})),r.Nodes.fts_dictionary}.apply(t,o))||(e.exports=n)},92660:(e,t,a)=>{var o,n,r,i=(r=a(30572))&&r.__esModule?r:{default:r},c=a(77077);o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s){return r.Nodes["coll-fts_parser"]||(n.Browser.Nodes["coll-fts_parser"]=n.Browser.Collection.extend({node:"fts_parser",label:e("FTS Parsers"),type:"coll-fts_parser",columns:["name","description"],canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:s.isTreeItemOfChildOfSchema})),r.Nodes.fts_parser||(n.Browser.Nodes.fts_parser=l.SchemaChildNode.extend({type:"fts_parser",sqlAlterHelp:"sql-altertsparser.html",sqlCreateHelp:"sql-createtsparser.html",dialogHelp:t("help.static",{filename:"fts_parser_dialog.html"}),label:e("FTS Parser"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_fts_parser_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},enable:"canCreate"},{name:"create_fts_parser_on_coll",node:"coll-fts_parser",applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},module:this,enable:"canCreate"},{name:"create_fts_parser",node:"fts_parser",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){var a=n.Browser.Nodes.fts_parser;return new i.default({prsstartList:function(){return(0,c.getNodeAjaxOptions)("start_functions",a,e,t,{cacheLevel:"database"})},prstokenList:function(){return(0,c.getNodeAjaxOptions)("token_functions",a,e,t,{cacheLevel:"database"})},prsendList:function(){return(0,c.getNodeAjaxOptions)("end_functions",a,e,t,{cacheLevel:"database"})},prslextypeList:function(){return(0,c.getNodeAjaxOptions)("lextype_functions",a,e,t,{cacheLevel:"database"})},prsheadlineList:function(){return(0,c.getNodeAjaxOptions)("headline_functions",a,e,t,{cacheLevel:"database"})},schemaList:function(){return(0,c.getNodeListById)(r.Nodes.schema,e,t,{cacheLevel:"database"})}},{schema:e.schema._id})}})),r.Nodes["coll-fts_parser"]}.apply(t,o))||(e.exports=n)},7215:(e,t,a)=>{var o,n,r,i=(r=a(66023))&&r.__esModule?r:{default:r},c=a(77077);o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s){return r.Nodes["coll-fts_template"]||(n.Browser.Nodes["coll-fts_template"]=n.Browser.Collection.extend({node:"fts_template",label:e("FTS Templates"),type:"coll-fts_template",columns:["name","description"],canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:s.isTreeItemOfChildOfSchema})),r.Nodes.fts_template||(n.Browser.Nodes.fts_template=l.SchemaChildNode.extend({type:"fts_template",sqlAlterHelp:"sql-altertstemplate.html",sqlCreateHelp:"sql-createtstemplate.html",dialogHelp:t("help.static",{filename:"fts_template_dialog.html"}),label:e("FTS Template"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_fts_template_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"},{name:"create_fts_template_on_coll",node:"coll-fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"},{name:"create_fts_template",node:"fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){var a=n.Browser.Nodes.fts_template;return new i.default({initFunctionList:function(){return(0,c.getNodeAjaxOptions)("get_init",a,e,t,{cacheLevel:"database"})},lexisFunctionList:function(){return(0,c.getNodeAjaxOptions)("get_lexize",a,e,t,{cacheLevel:"database"})},schemaList:function(){return(0,c.getNodeListById)(r.Nodes.schema,e,t)}},{schema:e.schema._id})}})),r.Nodes.fts_template}.apply(t,o))||(e.exports=n)},78002:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=(r=a(55066))&&r.__esModule?r:{default:r},l=a(40345),s=a(14511);o=[a(91669),a(28008),a(19755),a(72316),a(55112),a(33883),a(12030),a(94405),a(56756),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r,d,u,p){return r.Nodes["coll-function"]||(r.Nodes["coll-function"]=r.Collection.extend({node:"function",label:e("Functions"),type:"coll-function",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),r.Nodes.function||(r.Nodes.function=u.SchemaChildNode.extend({type:"function",sqlAlterHelp:"sql-alterfunction.html",sqlCreateHelp:"sql-createfunction.html",dialogHelp:t("help.static",{filename:"function_dialog.html"}),label:e("Function"),collection_type:"coll-function",hasSQL:!0,hasDepends:!0,width:r.stdW.md+"px",hasStatistics:!0,hasScriptTypes:["create","select"],Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_function_on_coll",node:"coll-function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_function",node:"function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new c.default((function(o){return(0,l.getNodePrivilegeRoleSchema)(a,e,t,o)}),(function(){return(0,s.getNodeVariableSchema)(a,e,t,!1,!1)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListById)(r.Nodes.schema,e,t,{cacheLevel:"database"})},getTypes:function(){return(0,i.getNodeAjaxOptions)("get_types",a,e,t)},getLanguage:function(){return(0,i.getNodeAjaxOptions)("get_languages",a,e,t)},getSupportFunctions:function(){return(0,i.getNodeAjaxOptions)("get_support_functions",a,e,t,{cacheNode:"function"})}},{node_info:e},{type:r.Nodes.function.type},{funcowner:r.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null,lanname:"sql"})}})),r.Nodes.function}.apply(t,o))||(e.exports=n)},74119:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=(r=a(55066))&&r.__esModule?r:{default:r},l=a(40345),s=a(14511);o=[a(91669),a(28008),a(19755),a(55112),a(33883),a(58307),a(78002),a(94405),a(56756),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r,d,u,p){return n.Nodes["coll-procedure"]||(o.Browser.Nodes["coll-procedure"]=o.Browser.Collection.extend({node:"procedure",label:e("Procedures"),type:"coll-procedure",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),n.Nodes.procedure||(o.Browser.Nodes.procedure=u.SchemaChildNode.extend({type:"procedure",sqlAlterHelp:"sql-alterprocedure.html",sqlCreateHelp:"sql-createprocedure.html",dialogHelp:t("help.static",{filename:"procedure_dialog.html"}),label:e("Procedure"),collection_type:"coll-procedure",hasSQL:!0,hasDepends:!0,hasStatistics:!0,hasScriptTypes:["create","exec"],width:n.stdW.md+"px",Init:function(){this.proc_initialized||(this.proc_initialized=!0,n.add_menus([{name:"create_procedure_on_coll",node:"coll-procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!1},enable:"canCreateProc"},{name:"create_procedure",node:"procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!0},enable:"canCreateProc"},{name:"create_procedure",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!0},enable:"canCreateProc"}]))},canCreateProc:function(e,t){var a=n.tree.getTreeNodeHierarchy(t);return!("catalog"in a)&&("server"in a&&("ppas"==a.server.server_type||"pg"==a.server.server_type&&a.server.version>=11e4))},getSchema:function(e,t){var a=this;return new c.default((function(o){return(0,l.getNodePrivilegeRoleSchema)(a,e,t,o)}),(function(){return(0,s.getNodeVariableSchema)(a,e,t,!1,!1)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListById)(n.Nodes.schema,e,t,{cacheLevel:"database"})},getTypes:function(){return(0,i.getNodeAjaxOptions)("get_types",a,e,t)},getLanguage:function(){return(0,i.getNodeAjaxOptions)("get_languages",a,e,t)},getSupportFunctions:function(){return(0,i.getNodeAjaxOptions)("get_support_functions",a,e,t,{cacheNode:"function"})}},{node_info:e},{type:n.Nodes.procedure.type},{funcowner:n.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null,lanname:"ppas"!=e.server.server_type?"sql":"edbspl"})}})),n.Nodes.procedure}.apply(t,o))||(e.exports=n)},69096:(e,t,a)=>{var o,n;a(68309);var r,i=(r=a(37642))&&r.__esModule?r:{default:r},c=a(77077),l=a(14511),s=a(40345);o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(94405),a(56756),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r,d,u,p){return r.Nodes["coll-trigger_function"]||(r.Nodes["coll-trigger_function"]=r.Collection.extend({node:"trigger_function",label:e("Trigger functions"),type:"coll-trigger_function",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),r.Nodes.trigger_function||(r.Nodes.trigger_function=u.SchemaChildNode.extend({type:"trigger_function",sqlAlterHelp:"plpgsql-trigger.html",sqlCreateHelp:"plpgsql-trigger.html",dialogHelp:t("help.static",{filename:"trigger_function_dialog.html"}),label:e("Trigger function"),collection_type:"coll-trigger_function",canEdit:function(e,t){var a=r.tree.findNodeByDomElement(t);return!(!a||"trigger"===a.parentNode.getData()._type)},hasSQL:!0,showMenu:function(e,t){return this.canEdit(e,t)},hasDepends:!0,hasStatistics:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_trigger_function_on_coll",node:"coll-trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_function",node:"trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new i.default((function(a){return(0,s.getNodePrivilegeRoleSchema)("",e,t,a)}),(function(){return(0,l.getNodeVariableSchema)(a,e,t,!1,!1)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListById)(r.Nodes.schema,e,t,{cacheLevel:"database"})},language:function(){return(0,c.getNodeAjaxOptions)("get_languages",a,e,t,{noCache:!0},(function(e){return o.reject(e,(function(e){return"sql"==e.label||"edbspl"==e.label}))}))},nodeInfo:e},{funcowner:r.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null})}})),r.Nodes.trigger_function}.apply(t,o))||(e.exports=n)},98185:(e,t,a)=>{var o,n,r,i=(r=a(64916))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(94405),a(5547)],void 0===(n=function(e,t,a,o,n,r,c){return r.Nodes["coll-operator"]||(n.Browser.Nodes["coll-operator"]=n.Browser.Collection.extend({node:"operator",label:e("Operators"),type:"coll-operator",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1,canSelect:!1})),r.Nodes.operator||(n.Browser.Nodes.operator=c.SchemaChildNode.extend({type:"operator",sqlAlterHelp:"sql-alteroperator.html",sqlCreateHelp:"sql-createoperator.html",label:e("Operator"),collection_type:"coll-operator",hasSQL:!0,hasDepends:!1,canDrop:!1,canDropCascade:!1,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new i.default}})),r.Nodes.operator}.apply(t,o))||(e.exports=n)},60465:(e,t,a)=>{var o,n,r,i=(r=a(38630))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r){return r.Nodes["coll-edbfunc"]||(r.Nodes["coll-edbfunc"]=r.Collection.extend({node:"edbfunc",label:e("Functions"),type:"coll-edbfunc",columns:["name","funcowner","description"],canDrop:!1,canDropCascade:!1})),r.Nodes.edbfunc||(r.Nodes.edbfunc=r.Node.extend({type:"edbfunc",dialogHelp:t("help.static",{filename:"edbfunc_dialog.html"}),label:e("Function"),collection_type:"coll-edbfunc",hasDepends:!0,canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.initialized||(this.initialized=!0)},canDrop:!1,canDropCascade:!1,model:r.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties"]},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:e("Owner"),cell:"string",type:"text",readonly:!0}]}),getSchema:function(){return new i.default({},{name:"sysfunc"})}})),r.Nodes.edbfunc}.apply(t,o))||(e.exports=n)},49606:(e,t,a)=>{var o,n;a(68309);var r,i=(r=a(38630))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(60465),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r,c){return r.Nodes["coll-edbproc"]||(n.Browser.Nodes["coll-edbproc"]=n.Browser.Collection.extend({node:"edbproc",label:e("Procedures"),type:"coll-edbproc",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:!1,canDropCascade:!1})),r.Nodes.edbproc||(n.Browser.Nodes.edbproc=r.Node.extend({type:"edbproc",dialogHelp:t("help.static",{filename:"edbproc_dialog.html"}),label:e("Procedure"),collection_type:"coll-edbproc",hasDepends:!0,canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.proc_initialized||(this.proc_initialized=!0)},canDrop:!1,canDropCascade:!1,model:c.model.extend({defaults:o.extend({},c.model.prototype.defaults,{lanname:"edbspl"}),isVisible:function(){return"sysfunc"!=this.name&&"sysproc"==this.name},validate:function(){return null}}),getSchema:function(){return new i.default({},{name:"sysproc"})}})),r.Nodes.edbproc}.apply(t,o))||(e.exports=n)},52225:(e,t,a)=>{var o,n,r,i=(r=a(63641))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r){return r.Nodes["coll-edbvar"]||(r.Nodes["coll-edbvar"]=r.Collection.extend({node:"edbvar",label:e("Variables"),type:"coll-edbvar",columns:["name","funcowner","description"],canDrop:!1,canDropCascade:!1})),r.Nodes.edbvar||(r.Nodes.edbvar=r.Node.extend({type:"edbvar",dialogHelp:t("help.static",{filename:"edbvar_dialog.html"}),label:e("Function"),collection_type:"coll-edbvar",canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.initialized||(this.initialized=!0)},canDrop:!1,canDropCascade:!1,getSchema:function(){return new i.default}})),r.Nodes.edbvar}.apply(t,o))||(e.exports=n)},2961:(e,t,a)=>{var o,n,r,i=(r=a(12464))&&r.__esModule?r:{default:r},c=a(40345),l=a(77077);o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,s,d,u){return r.Nodes["coll-package"]||(r.Nodes["coll-package"]=r.Collection.extend({node:"package",label:e("Packages"),type:"coll-package",columns:["name","owner","description"],canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),r.Nodes.package||(r.Nodes.package=d.SchemaChildNode.extend({type:"package",epasHelp:!0,dialogHelp:t("help.static",{filename:"package_dialog.html"}),label:e("Package"),collection_type:"coll-package",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_package_on_coll",node:"coll-package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_package",node:"package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_package",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},canCreate:function(e,t,a){if(a&&0==a.check)return!0;var o=r.tree.getTreeNodeHierarchy(t),n=o.server;return(!n||"pg"!==n.server_type)&&null==o.catalog},getSchema:function(e,t){var a=r.Nodes.package;return new i.default((function(o){return(0,c.getNodePrivilegeRoleSchema)(a,e,t,o)}),{schemas:function(){return(0,l.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},node_info:e},{schema:e.schema.label})}})),r.Nodes.package}.apply(t,o))||(e.exports=n)},67872:(e,t,a)=>{var o,n;a(4723),a(74916),a(21249),a(68309);var r,i=a(77077),c=a(40345),l=(r=a(76547))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,s,d,u){return r.Nodes["coll-sequence"]||(r.Nodes["coll-sequence"]=r.Collection.extend({node:"sequence",label:e("Sequences"),type:"coll-sequence",columns:["name","seqowner","comment"],hasStatistics:!0,canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),r.Nodes.sequence||(r.Nodes.sequence=d.SchemaChildNode.extend({type:"sequence",sqlAlterHelp:"sql-altersequence.html",sqlCreateHelp:"sql-createsequence.html",dialogHelp:t("help.static",{filename:"sequence_dialog.html"}),label:e("Sequence"),collection_type:"coll-sequence",hasSQL:!0,hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_sequence_on_coll",node:"coll-sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_sequence",node:"sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_sequence",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new l.default((function(o){return(0,c.getNodePrivilegeRoleSchema)(a,e,t,o)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListByName)("schema",e,t,{},(function(e){return!e.label.match(/^pg_/)}))},allTables:function(){return(0,i.getNodeListByName)("table",e,t,{includeItemKeys:["_id"]})},getColumns:function(a){return(0,i.getNodeAjaxOptions)("get_columns",r.Nodes.table,e,t,{urlParams:a,useCache:!1},(function(e){return e.map((function(e){return{value:e.name,image:"icon-column",label:e.name}}))}))}},{seqowner:r.serverInfo[e.server._id].user.name,schema:t.label})}})),r.Nodes.sequence}.apply(t,o))||(e.exports=n)},50581:(e,t,a)=>{var o,n;a(68309);var r,i=(r=a(41551))&&r.__esModule?r:{default:r};o=[a(91669),a(19755),a(66419),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n){return n.Nodes["coll-catalog"]||(n.Nodes["coll-catalog"]=n.Collection.extend({node:"catalog",label:e("Catalogs"),type:"coll-catalog",columns:["name","namespaceowner","description"],canDrop:!1,canDropCascade:!1})),n.Nodes.catalog||(n.Nodes.catalog=n.Node.extend({parent_type:"database",type:"catalog",label:e("Catalog"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(e){return new i.default({namespaceowner:n.serverInfo[e.server._id].user.name})}})),n.Nodes.catalog}.apply(t,o))||(e.exports=n)},94405:(e,t,a)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}a(4129),a(41539),a(78783),a(66992),a(33948),a(69070),a(38880),a(82526),a(41817),a(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaChildNode=void 0;var n=c(a(66235)),r=c(a(56756));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var c=n?Object.getOwnPropertyDescriptor(e,r):null;c&&(c.get||c.set)?Object.defineProperty(a,r,c):a[r]=e[r]}return a.default=e,t&&t.set(e,a),a}var l=n.extend({parent_type:["schema","catalog"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,canCreate:r.childCreateMenuEnabled},!1);t.SchemaChildNode=l},30160:(e,t,a)=>{var o,n;a(69826),a(69600),a(5735),a(83753),a(32564),a(68309);var r,i=(r=a(28970))&&r.__esModule?r:{default:r},c=a(40345),l=a(77077);o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(71158),a(5547),a(63563)],void 0===(n=function(e,t,a,o,n,r,s,d){return s.VacuumCollectionControl=s.Control.extend({grid_columns:void 0,initialize:function(){s.Control.prototype.initialize.apply(this,arguments);var e=this,t=this.model,n=e.field.get("url");if(n&&t.isNew()){var r,i=e.field.get("node"),c=e.field.get("node_data"),l=e.field.get("node_info"),d=i.generate_url.apply(i,[null,n,c,!1,l]);t.trigger("pgadmin-view:fetching",t,e.field),a.ajax({async:!1,url:d}).done((function(e){r=e})).fail((function(){t.trigger("pgadmin-view:fetch:error",t,e.field)})),t.trigger("pgadmin-view:fetched",t,e.field),r&&o.isArray(r)&&t.get(e.field.get("name")).reset(r,{silent:!0})}},events:{keydown:"keyDownHandler"},keyDownHandler:function(e){var t=a(this.$el).find("button:last"),o=a(this.$el).find("td.editable:first");9!=e.keyCode||e.shiftKey||a(o).is(":visible")&&a(e.target).is(a(t))&&(a(o).trigger("click"),e.preventDefault(),e.stopPropagation())},render:function(){var e=this,t=e.field.attributes;e.grid&&(e.grid.remove(),delete e.grid,e.grid=void 0),e.$el.empty();var n=o.template(['<div class="subnode-header">','<% if (label && label != "") %> {','    <span class="control-label col-sm-4"><%-label%></span>',"}","</div>"].join("\n")),r=a('<div class="pgadmin-control-group backgrid form-group col-12 object subnode"></div>').append(n(t)),i=e.grid=new d.Grid({columns:e.grid_columns,collection:e.model.get(e.field.get("name")),className:"backgrid table table-bordered table-noouter-border table-hover"});return e.$el.addClass("mb-0"),e.$el.append(a(r).append(i.render().$el)),e}}),s.cellFunction=function(e){switch(e.get("column_type")){case"integer":return d.IntegerCell;case"number":return d.NumberCell.extend({decimals:this.get("decimals")||d.NumberFormatter.prototype.defaults.decimals});case"string":return d.StringCell;default:return d.Cell}},s.VacuumTableModel=r.Node.Model.extend({defaults:{name:void 0,setting:void 0,label:void 0,value:void 0,column_type:void 0},toJSON:function(){var e=r.Node.Model.prototype.toJSON.apply(this);return delete e.label,delete e.setting,delete e.column_type,e}}),s.VacuumSettingsSchema=[{id:"spacer_ctrl",group:e("Table"),mode:["edit","create"],type:"spacer"},{id:"autovacuum_custom",label:e("Custom auto-vacuum?"),group:e("Table"),mode:["edit","create"],type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:function(e){return e.top&&e.top.get("is_partitioned")?(setTimeout((function(){e.set("autovacuum_custom",!1)}),10),!0):!!e.top.inSchema.apply(this,[e])}},{id:"autovacuum_enabled",label:e("Autovacuum Enabled?"),group:e("Table"),mode:["edit","create"],type:"radioModern",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",options:[{label:e("Not set"),value:"x"},{label:e("Yes"),value:"t"},{label:e("No"),value:"f"}],deps:["autovacuum_custom"],disabled:function(e){return!(!e.top.inSchema.apply(this,[e])&&1==e.get("autovacuum_custom"))&&(setTimeout((function(){e.set("autovacuum_enabled","x")}),10),!0)}},{id:"vacuum_table",label:"",model:s.VacuumTableModel,editable:!1,type:"collection",canEdit:!0,group:e("Table"),mode:["edit","create"],url:"get_table_vacuum",control:s.VacuumCollectionControl.extend({grid_columns:[{name:"label",label:e("Label"),headerCell:d.Extension.CustomHeaderCell,cell:"string",editable:!1,cellHeaderClasses:"width_percent_40"},{name:"value",label:e("Value"),cellHeaderClasses:"width_percent_30",decimals:5,cellFunction:s.cellFunction,editable:function(e){return e.handler.get("autovacuum_custom")},headerCell:d.Extension.CustomHeaderCell},{name:"setting",label:e("Default"),cellHeaderClasses:"width_percent_30",headerCell:d.Extension.CustomHeaderCell,cellFunction:s.cellFunction,editable:!1}]}),deps:["autovacuum_custom"]},{id:"spacer_ctrl",group:e("TOAST table"),mode:["edit","create"],type:"spacer"},{id:"toast_autovacuum",label:e("Custom auto-vacuum?"),group:e("TOAST table"),mode:["edit","create"],type:"switch",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",disabled:function(e){return!(!e.top.inSchema.apply(this,[e])&&(e.isNew()||!0===e.get("toast_autovacuum_enabled")||!0===e.top.get("hastoasttable")))}},{id:"toast_autovacuum_enabled",label:e("Autovacuum Enabled?"),group:e("TOAST table"),mode:["edit","create"],type:"radioModern",controlLabelClassName:"control-label pg-el-sm-4 pg-el-12",controlsClassName:"pgadmin-controls pg-el-sm-8 pg-el-12",options:[{label:e("Not set"),value:"x"},{label:e("Yes"),value:"t"},{label:e("No"),value:"f"}],deps:["toast_autovacuum"],disabled:function(e){return!(!e.top.inSchema.apply(this,[e])&&!0===e.get("toast_autovacuum"))&&((e.isNew()||e.get("hastoasttable"))&&setTimeout((function(){e.set("toast_autovacuum_enabled","x")}),10),!0)}},{id:"vacuum_toast",label:"",model:s.VacuumTableModel,type:"collection",editable:function(e){return e.isNew()},canEdit:!0,group:e("TOAST table"),mode:["properties","edit","create"],url:"get_toast_table_vacuum",control:s.VacuumCollectionControl.extend({grid_columns:[{name:"label",label:e("Label"),headerCell:d.Extension.CustomHeaderCell,cell:"string",editable:!1,cellHeaderClasses:"width_percent_40"},{name:"value",label:e("Value"),cellHeaderClasses:"width_percent_30",headerCell:d.Extension.CustomHeaderCell,decimals:5,cellFunction:s.cellFunction,editable:function(e){return e.handler.get("toast_autovacuum")}},{name:"setting",label:e("Default"),cellHeaderClasses:"width_percent_30",headerCell:d.Extension.CustomHeaderCell,cellFunction:s.cellFunction,editable:!1}]}),deps:["toast_autovacuum"]}],r.Nodes["coll-schema"]||(r.Nodes["coll-schema"]=r.Collection.extend({node:"schema",label:e("Schemas"),type:"coll-schema",columns:["name","namespaceowner","description"]})),r.Nodes.schema||(r.Nodes.schema=r.Node.extend({parent_type:"database",type:"schema",sqlAlterHelp:"sql-alterschema.html",sqlCreateHelp:"sql-createschema.html",dialogHelp:t("help.static",{filename:"schema_dialog.html"}),label:e("Schema"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_schema_on_coll",node:"coll-schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"}},{name:"create_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"}},{name:"create_schema",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"},enable:"can_create_schema"}]))},can_create_schema:function(e){return r.Nodes.database.is_conn_allow.call(this,e)},getSchema:function(e,t){var a=r.Nodes.schema;return new i.default((function(o){return(0,c.getNodePrivilegeRoleSchema)(a,e,t,o)}),{roles:function(){return(0,l.getNodeListByName)("role",e,t,{cacheLevel:"database"})},server_info:r.serverInfo[e.server._id]},{namespaceowner:r.serverInfo[e.server._id].user.name})}}),r.tableChildTreeNodeHierarchy=function(e){return r.tree.getTreeNodeHierarchy(e)}),d.Extension.TableChildSwitchCell=d.Extension.SwitchCell.extend({initialize:function(){d.Extension.SwitchCell.prototype.initialize.apply(this,arguments),d.Extension.DependentCell.prototype.initialize.apply(this,arguments)},dependentChanged:function(){var e=this.model,t=this.column,a=this.column.get("editable"),n=this.$el.find("input[type=checkbox]").first(),r=t.get("name");return(o.isFunction(a)?!!a.apply(t,[e]):!!a)?(this.$el.addClass("editable"),n.bootstrapToggle("disabled",!1)):(this.$el.removeClass("editable"),n.bootstrapToggle("disabled",!0),setTimeout((function(){e.set(r,!1)}),10)),this.delegateEvents(),this},remove:d.Extension.DependentCell.prototype.remove}),r.Nodes.schema}.apply(t,o))||(e.exports=n)},56756:(e,t,a)=>{var o;a(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.childCreateMenuEnabled=function(e,t,a){if(a&&!1===a.check)return!0;var o=n.tree.findNodeByDomElement(t);return!!o&&o.anyFamilyMember((function(e){return"schema"===e.getData()._type}))},t.isTreeItemOfChildOfSchema=function(e,t){var a=n.tree.findNodeByDomElement(t);return!!a&&r(a)},t.isTreeNodeOfSchemaChild=r;var n=((o=a(55112))&&o.__esModule?o:{default:o}).default.Browser;function r(e){return e.anyParent((function(e){return"schema"===e.getData()._type}))}},98050:(e,t,a)=>{var o,n;a(82772),a(68309);var r,i=a(77077),c=(r=a(47471))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(55455),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s,d){return r.Nodes["coll-synonym"]||(n.Browser.Nodes["coll-synonym"]=n.Browser.Collection.extend({node:"synonym",label:e("Synonyms"),type:"coll-synonym",columns:["name","owner","is_public_synonym"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),r.Nodes.synonym||(n.Browser.Nodes.synonym=s.SchemaChildNode.extend({type:"synonym",epasHelp:!0,dialogHelp:t("help.static",{filename:"synonym_dialog.html"}),label:e("Synonym"),collection_type:"coll-synonym",hasSQL:!0,hasDepends:!0,parent_type:["schema","catalog"],Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_synonym_on_coll",node:"coll-synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_synonym",node:"synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_synonym",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new c.default({role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"})},synobjschema:function(){return(0,i.getNodeListByName)("schema",e,t,{},(function(e){return e&&-1==o.indexOf(["pg_catalog","sys","dbo","pgagent","information_schema","dbms_job_procedure"],e.label)}))},getTargetObjectOptions:function(o,n){return(0,i.getNodeAjaxOptions)("get_target_objects",a,e,t,{urlParams:{trgTyp:o,trgSchema:n},useCache:!1})}},e,{owner:r.serverInfo[e.server._id].user.name,schema:t.label,synobjschema:t.label})},canCreate:function(e,t,a){if(a&&0==a.check)return!0;var o=r.tree.getTreeNodeHierarchy(t),n=o.server;return(!n||"pg"!==n.server_type)&&null==o.catalog}})),r.Nodes.synonym}.apply(t,o))||(e.exports=n)},94622:(e,t,a)=>{var o,n;a(82772);var r=a(15253);o=[a(91669),a(28008),a(19755),a(66419),a(72316),a(55112),a(33883),a(12030),a(71158),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,i,c,l,s,d){return c.Nodes["coll-column"]||(c.Nodes["coll-column"]=c.Collection.extend({node:"column",label:e("Columns"),type:"coll-column",columns:["name","atttypid","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:!1})),c.Nodes.column||(c.Nodes.column=c.Node.extend({parent_type:["table","view","mview"],collection_type:["coll-table","coll-view","coll-mview"],type:"column",label:e("Column"),hasSQL:!0,sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-altertable.html",dialogHelp:t("help.static",{filename:"column_dialog.html"}),canDrop:function(e,t){var a=c.tree.findNodeByDomElement(t);return!!a&&a.anyParent((function(e){return"table"===e.getData()._type&&!e.anyParent((function(e){return"catalog"===e.getData()._type}))}))},hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,c.add_menus([{name:"create_column_on_coll",node:"coll-column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column",node:"column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"}]))},getSchema:function(e,t){return(0,r.getNodeColumnSchema)(e,t,c)},canCreate:function(e,t,a){if(a&&0==a.check)return!0;for(var n=c.tree,r=t,i=e,l=[];r;){if(o.indexOf(["schema"],i._type)>-1)return!0;if(o.indexOf(["view","coll-view","mview","coll-mview"],i._type)>-1){l.push(i._type);break}l.push(i._type),i=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!(o.indexOf(l,"catalog")>-1||o.indexOf(l,"coll-view")>-1||o.indexOf(l,"coll-mview")>-1||o.indexOf(l,"mview")>-1||o.indexOf(l,"view")>-1)}})),c.Nodes.column}.apply(t,o))||(e.exports=n)},76994:(e,t,a)=>{var o,n;a(32564);var r=a(77077),i=l(a(4847)),c=l(a(55958));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,l,s,d){return l.Nodes["coll-compound_trigger"]||(n.Browser.Nodes["coll-compound_trigger"]=n.Browser.Collection.extend({node:"compound_trigger",label:e("Compound Triggers"),type:"coll-compound_trigger",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),l.Nodes.compound_trigger||(n.Browser.Nodes.compound_trigger=l.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"compound_trigger",label:e("Compound Trigger"),hasSQL:!0,hasDepends:!0,width:l.stdW.sm+"px",epasHelp:!0,dialogHelp:t("help.static",{filename:"compound_trigger_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_compound_trigger_on_coll",node:"coll-compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"enable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"enable_compound_trigger",category:"connect",priority:3,label:e("Enable compound trigger"),icon:"fa fa-check",enable:"canCreate_with_compound_trigger_enable"},{name:"disable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"disable_compound_trigger",category:"drop",priority:3,label:e("Disable compound trigger"),icon:"fa fa-times",enable:"canCreate_with_compound_trigger_disable"},{name:"create_compound_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},callbacks:{enable_compound_trigger:function(e){var t=e||{},o=l.tree,n=t.item||o.selected(),r=n?o.itemData(n):void 0;if(!r)return!1;var i=r;a.ajax({url:this.generate_url(n,"enable",r,!0),type:"PUT",data:{is_enable_trigger:"O"},dataType:"json"}).done((function(e){1==e.success&&(c.default.success(e.info),o.removeIcon(n),i.icon="icon-compound_trigger",o.addIcon(n,{icon:i.icon}),o.unload(n),o.setInode(!1),o.deselect(n),setTimeout((function(){o.select(n)}),10))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),o.unload(n)}))},disable_compound_trigger:function(t){var o=t||{},n=l.tree,r=o.item||n.selected(),i=r?n.itemData(r):void 0;if(!i)return!1;var s=i;a.ajax({url:this.generate_url(r,"enable",i,!0),type:"PUT",data:{is_enable_trigger:"D"},dataType:"json"}).done((function(e){1==e.success&&(c.default.success(e.info),n.removeIcon(r),s.icon="icon-compound_trigger-bad",n.addIcon(r,{icon:s.icon}),n.unload(r),n.setInode(!1),n.deselect(r),setTimeout((function(){n.select(r)}),10))})).fail((function(t,a,o){c.default.pgRespErrorNotify(t,o,e("Disable compound trigger failed")),n.unload(r)}))}},canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new i.default({columns:function(){return(0,r.getNodeListByName)("column",e,t,{cacheLevel:"column"})}},e)},canCreate:function(e,t,a){if(a&&0==a.check)return!0;var o=l.tree.getTreeNodeHierarchy(t),n=o.server;return(!n||!("pg"===n.server_type||n.version<12e4))&&null==o.catalog},canCreate_with_compound_trigger_enable:function(e,t,a){return!("view"in l.tree.getTreeNodeHierarchy(t))&&("icon-compound_trigger-bad"===e.icon&&this.canCreate.apply(this,[e,t,a]))},canCreate_with_compound_trigger_disable:function(e,t,a){return!("view"in l.tree.getTreeNodeHierarchy(t))&&("icon-compound_trigger"===e.icon&&this.canCreate.apply(this,[e,t,a]))}})),l.Nodes.compound_trigger}.apply(t,o))||(e.exports=n)},89996:(e,t,a)=>{var o,n;a(32564),a(82772);var r=c(a(29754)),i=c(a(55958));function c(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,c,l){return c.Nodes.check_constraint||(n.Browser.Nodes.check_constraint=c.Node.extend({type:"check_constraint",label:e("Check"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"check_dialog.html"}),hasSQL:!0,hasDepends:!0,parent_type:["table","partition"],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,c.add_menus([{name:"create_check_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Check..."),icon:"wcTabIcon icon-check_constraint",data:{action:"create",check:!0},enable:"canCreate"},{name:"validate_check_constraint",node:"check_constraint",module:this,applies:["object","context"],callback:"validate_check_constraint",category:"validate",priority:4,label:e("Validate check constraint"),icon:"fa fa-link",enable:"is_not_valid",data:{action:"edit",check:!0}}]))},is_not_valid:function(e,t,a){return!!this.canCreate(e,t,a)&&(e&&!e.valid)},callbacks:{validate_check_constraint:function(e){var t=e||{},o=c.tree,n=t.item||o.selected(),r=n?o.itemData(n):void 0;if(r){var l=r;a.ajax({url:this.generate_url(n,"validate",r,!0),type:"GET"}).done((function(e){1==e.success&&(i.default.success(e.info),o.removeIcon(n),l.valid=!0,l.icon="icon-check_constraint",o.addIcon(n,{icon:l.icon}),setTimeout((function(){o.deselect(n)}),10),setTimeout((function(){o.select(n)}),100))})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a),o.unload(n)}))}return!1}},canDrop:l.isTreeItemOfChildOfSchema,getSchema:function(){return new r.default},canCreate:function(e,t,a){if(a&&0==a.check)return!0;for(var n=c.tree,r=t,i=e,l=[];r;){if(o.indexOf(["schema"],i._type)>-1)return!0;l.push(i._type),i=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return o.indexOf(l,"catalog")<=-1}})),c.Nodes.check_constraint}.apply(t,o))||(e.exports=n)},12447:(e,t,a)=>{var o,n;a(82772);var r=a(81873);o=[a(91669),a(28008),a(19755),a(66419),a(72316),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n,i,c){return c.Nodes.exclusion_constraint||(i.Browser.Nodes.exclusion_constraint=c.Node.extend({type:"exclusion_constraint",label:e("Exclusion constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"exclusion_constraint_dialog.html"}),hasSQL:!0,parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],url_jump_after_node:"schema",width:c.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,c.add_menus([{name:"create_exclusion_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Exclusion constraint..."),icon:"wcTabIcon icon-exclusion_constraint",data:{action:"create",check:!0},enable:"canCreate"}]))},is_not_valid:function(e){return e&&!e.valid},getSchema:function(e,t){return(0,r.getNodeExclusionConstraintSchema)(e,t,i.Browser)},canCreate:function(e,t,a){if(a&&0==a.check)return!0;for(var n=c.tree,r=t,i=e,l=[],s=!1,d=!1;r;){if(s||"table"!=i._type&&"partition"!=i._type||(s=!0,"is_partitioned"in i&&i.is_partitioned&&(d=!0)),o.indexOf(["schema"],i._type)>-1)return!d;l.push(i._type),i=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!(o.indexOf(l,"catalog")>-1)&&!d}})),c.Nodes.exclusion_constraint}.apply(t,o))||(e.exports=n)},72474:(e,t,a)=>{var o,n;a(32564),a(82772);var r,i=a(40175),c=(r=a(55958))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(72316),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n,r,l){return l.Nodes.foreign_key||(r.Browser.Nodes.foreign_key=l.Node.extend({type:"foreign_key",label:e("Foreign key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"foreign_key_dialog.html"}),hasSQL:!0,parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,hasDepends:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_foreign_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign key..."),icon:"wcTabIcon icon-foreign_key",data:{action:"create",check:!0},enable:"canCreate"},{name:"validate_foreign_key",node:"foreign_key",module:this,applies:["object","context"],callback:"validate_foreign_key",category:"validate",priority:4,label:e("Validate foreign key"),icon:"fa fa-link",enable:"is_not_valid"}]))},is_not_valid:function(e){return e&&!e.valid},callbacks:{validate_foreign_key:function(e){var t=e||{},o=l.tree,n=t.item||o.selected(),r=n?o.itemData(n):void 0;if(r){var i=r;a.ajax({url:this.generate_url(n,"validate",r,!0),type:"GET"}).done((function(e){1==e.success&&(c.default.success(e.info),o.removeIcon(n),i.valid=!0,i.icon="icon-foreign_key",o.addIcon(n,{icon:i.icon}),setTimeout((function(){o.deselect(n)}),10),setTimeout((function(){o.select(n)}),100))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),o.unload(n)}))}return!1}},getSchema:function(e,t){return(0,i.getNodeForeignKeySchema)(e,t,r.Browser)},canCreate:function(e,t,a){if(a&&0==a.check)return!0;for(var n=l.tree,r=t,i=e,c=[],s=!1,d=!1,u=n.getTreeNodeHierarchy(r).server.version;r;){if(s||"table"!=i._type&&"partition"!=i._type||(s=!0,"is_partitioned"in i&&i.is_partitioned&&u<11e4&&(d=!0)),o.indexOf(["schema"],i._type)>-1)return!d;c.push(i._type),i=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!(o.indexOf(c,"catalog")>-1)&&!d}})),l.Nodes.foreign_key}.apply(t,o))||(e.exports=n)},14261:(e,t,a)=>{var o,n;a(47042),a(68309),a(91038),a(78783),a(82526),a(41817),a(32165),a(66992),a(33948),a(79753),a(82772),a(32564),a(41539),a(39714),a(83710),a(21249),a(23123),a(74916),a(40561),a(15306);var r,i=a(77077),c=(r=a(29458))&&r.__esModule?r:{default:r};function l(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==a.return||a.return()}finally{if(c)throw r}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(71158),a(5547)],n=function(e,t,a,o,n,r,s,d){return r.Nodes.primary_key||(n.Browser.Nodes.primary_key=r.Node.extend({type:"primary_key",label:e("Primary key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"primary_key_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_primary_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Primary key"),icon:"wcTabIcon icon-primary_key",data:{action:"create",check:!0},enable:"canCreate"}]))},canCreate:function(e,t,a){if(a&&0==a.check)return!0;for(var n=r.tree,i=t,c=e,l=[],s=!1,d=!1,u=n.getTreeNodeHierarchy(i).server.version;i;){if(s||"table"!=c._type&&"partition"!=c._type||(s=!0,"is_partitioned"in c&&c.is_partitioned&&u<11e4&&(d=!0)),o.indexOf(["schema"],c._type)>-1){if(d)return!1;var p=n.children(arguments[1],!1),m=!1;return o.each(p,(function(e){a=r.tree.itemData(e),m||"primary_key"!=a._type||(m=!0)})),!m}l.push(c._type),c=(i=n.hasParent(i)?n.parent(i):null)?n.itemData(i):null}return!(o.indexOf(l,"catalog")>-1)&&!d},getSchema:function(e,t){return new c.default({columns:function(){return(0,i.getNodeListByName)("column",e,t)},spcname:function(){return(0,i.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},index:function(){return(0,i.getNodeListByName)("index",e,t,{jumpAfterNode:"schema"})}},e)},model:n.Browser.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,oid:void 0,is_sys_obj:void 0,comment:void 0,spcname:void 0,index:void 0,fillfactor:void 0,condeferrable:void 0,condeferred:void 0,columns:[],include:[]},genResetColOptions:function(){var e=this;setTimeout((function(){e.custom_options(),e.render.apply(e)}),50)},genCustomOptions:function(){var e=this.model.top.get("columns"),t=[];e.length>0&&o.each(e.models,(function(e){var a=e.get("name");o.isUndefined(a)||o.isNull(a)||t.push({label:a,value:a,image:"icon-column"})})),this.field.set("options",t)},checkReadOnly:function(e){return!o.has(e,"top")||o.isUndefined(e.top)||e.top.isNew()?!e.isNew():!o.isUndefined(e.get("oid"))},schema:[{id:"name",label:e("Name"),type:"text",mode:["properties","create","edit"],editable:!0,cellHeaderClasses:"width_percent_40"},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"],editable:!1,cellHeaderClasses:"width_percent_20"},{id:"is_sys_obj",label:e("System primary key?"),cell:"boolean",type:"switch",mode:["properties"]},{id:"comment",label:e("Comment"),cell:"string",type:"multiline",mode:["properties","create","edit"],deps:["name"],disabled:function(e){var t=e.get("name");return(!t||""==t)&&(setTimeout((function(){e.get("comment")&&""!==e.get("comment")&&e.set("comment",null)}),10),!0)}},{id:"columns",label:e("Columns"),type:"collection",group:e("Definition"),editable:!1,cell:d.StringCell.extend({initialize:function(){d.StringCell.prototype.initialize.apply(this,arguments);var e=this,t=this.model.get("columns");if(o.isUndefined(e.model.get("oid"))){var a=e.model.top.get("columns");e.listenTo(a,"remove",e.removeColumn),e.listenTo(a,"change:name",e.resetColOptions)}t.on("pgadmin:multicolumn:updated",(function(){e.render.apply(e)})),e.listenTo(t,"add",e.render),e.listenTo(t,"remove",e.render)},removeColumn:function(e){var t=this,a=t.model.get("columns").where({column:e.get("name")});t.model.get("columns").remove(a),setTimeout((function(){t.render()}),10);setTimeout((function(){var e=t.model.top.get("primary_key"),a=[];e.each((function(e){0==e.get("columns").length&&a.push(e)})),e.remove(a)}),100)},resetColOptions:function(e){var t=this,a=t.model.get("columns").where({column:e.previous("name")});a.length>0&&a[0].set({column:e.get("name")},{silent:!0}),setTimeout((function(){t.render()}),10)},formatter:{fromRaw:function(e){return e.pluck("column").toString()},toRaw:function(e){return e}},render:function(){return d.StringCell.prototype.render.apply(this,arguments)},remove:function(){var e=this.model.top.get("columns"),t=this.model.get("columns");t&&t.off("pgadmin:multicolumn:updated"),this.stopListening(e,"remove",self.removeColumn),this.stopListening(e,"change:name",self.resetColOptions),d.StringCell.prototype.remove.apply(this,arguments)}}),canDelete:!0,canAdd:!0,control:s.MultiSelectAjaxControl.extend({defaults:o.extend({},s.NodeListByNameControl.prototype.defaults,{select2:{multiple:!0,allowClear:!0,width:"style",placeholder:e("Select the column(s)")}}),keyPathAccessor:function(e,t){var a=e;if(o.isArray(a))return o.map(a,(function(e){return e.column}));var n,r=l(t=t.split("."));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(o.isNull(a))return null;o.isEmpty(i)||(o.isUndefined(a[i])||(a=a[i]))}}catch(e){r.e(e)}finally{r.f()}return o.isObject(a)&&!o.isArray(a)?null:a},initialize:function(){var e=this;if(this.model.handler){if(s.Select2Control.prototype.initialize.apply(this,arguments),o.isUndefined(e.model.get("oid"))){var t=e.model.top.get("columns");e.listenTo(t,"remove",e.resetColOptions),e.listenTo(t,"change:name",e.resetColOptions)}e.custom_options()}else s.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments);e.model.get("columns").on("pgadmin:multicolumn:updated",(function(){e.render.apply(e)}))},resetColOptions:function(){this.genResetColOptions()},custom_options:function(){this.genCustomOptions()},onChange:function(){var e=this,t=this.model,a=this.field.get("name").split(".").shift(),n=this.getValueFromDOM(),r=t.get(a),i=[];this.stopListening(this.model,"change:"+a,this.render),r.each((function(e){var t=e.get("column"),a=o.indexOf(n,t);a>-1?n.splice(a,1):i.push(t)})),o.each(n,(function(t){var a=new(e.field.get("model"))({column:t},{silent:!0,top:e.model.top,collection:r,handler:r});r.add(a)})),o.each(i,(function(e){r.remove(r.where({column:e}))})),this.listenTo(this.model,"change:"+a,this.render)},remove:function(){if(this.model.handler){var e=this,t=e.model.top.get("columns");e.stopListening(t,"remove",e.resetColOptions),e.stopListening(t,"change:name",e.resetColOptions),e.model.get("columns").off("pgadmin:multicolumn:updated"),s.Select2Control.prototype.remove.apply(this,arguments)}else s.MultiSelectAjaxControl.prototype.remove.apply(this,arguments)},render:function(){var e=this.model.get("index");if(!o.isUndefined(e)&&""!=e){var t=this.model.get("columns");t.reset([],{silent:!0})}return s.Select2Control.prototype.render.apply(this,arguments)}}),deps:["index"],node:"column",model:r.Node.Model.extend({defaults:{column:void 0},validate:function(){return null}}),transform:function(e){var t=[];return e&&o.isArray(e)&&o.each(e,(function(e){t.push({label:e.label,value:e.label,image:"icon-column"})})),t},select2:{allowClear:!1},readonly:function(e){return this.checkReadOnly(e)},disabled:function(e){var t=e.get("index");return!(o.isUndefined(t)||""==t)}},{id:"include",label:e("Include columns"),type:"array",group:e("Definition"),editable:!1,canDelete:!0,canAdd:!0,mode:["properties","create","edit"],visible:function(e){return e=e.top,!o.isUndefined(e.node_info)&&!o.isUndefined(e.node_info.server)&&!o.isUndefined(e.node_info.server.version)&&e.node_info.server.version>=11e4},control:s.MultiSelectAjaxControl.extend({defaults:o.extend({},s.NodeListByNameControl.prototype.defaults,{select2:{allowClear:!1,width:"style",multiple:!0,placeholder:e("Select the column(s)")}}),initialize:function(){var e=this;if(this.model.handler){if(s.Select2Control.prototype.initialize.apply(this,arguments),o.isUndefined(e.model.get("oid"))){var t=e.model.top.get("columns");e.listenTo(t,"remove",e.resetColOptions),e.listenTo(t,"change:name",e.resetColOptions)}e.custom_options()}else s.MultiSelectAjaxControl.prototype.initialize.apply(this,arguments)},resetColOptions:function(){this.genResetColOptions()},custom_options:function(){this.genCustomOptions()}}),deps:["index"],node:"column",readonly:function(e){return this.checkReadOnly(e)},disabled:function(e){var t=e.get("index");return!o.isUndefined(t)&&""!=t&&(setTimeout((function(){e.set("include",[])}),10),!0)}},{id:"spcname",label:e("Tablespace"),type:"text",group:e("Definition"),control:"node-list-by-name",node:"tablespace",deps:["index"],select2:{allowClear:!1},filter:function(e){return"pg_global"!=e.label},disabled:function(e){var t=(e=e.top||e).get("index");return!o.isUndefined(t)&&""!=t&&(setTimeout((function(){e.set("spcname","")}),10),!0)}},{id:"index",label:e("Index"),mode:["create"],type:"text",group:e("Definition"),control:s.NodeListByNameControl.extend({initialize:function(){s.NodeListByNameControl.prototype.initialize.apply(this,arguments)}}),select2:{allowClear:!0},node:"index",readonly:function(e){return!(!o.has(e,"top")||o.isUndefined(e.top)||e.top.isNew())||!e.isNew()},visible:function(e){return!o.isUndefined(e.top.node_info.table)}},{id:"fillfactor",label:e("Fill factor"),deps:["index"],type:"int",group:e("Definition"),allowNull:!0,disabled:function(e){var t=e.get("index");return!o.isUndefined(t)&&""!=t&&(setTimeout((function(){e.set("fillfactor",null)}),10),!0)}},{id:"condeferrable",label:e("Deferrable?"),type:"switch",group:e("Definition"),deps:["index"],readonly:function(e){return this.checkReadOnly(e)},disabled:function(e){var t=e.get("index");return!o.isUndefined(t)&&""!=t&&(setTimeout((function(){e.get("condeferrable")&&e.set("condeferrable",!1)}),10),!0)}},{id:"condeferred",label:e("Deferred?"),type:"switch",group:e("Definition"),deps:["condeferrable"],readonly:function(e){return this.checkReadOnly(e)},disabled:function(e){return 1!=e.get("condeferrable")&&(setTimeout((function(){e.get("condeferred")&&e.set("condeferred",!1)}),10),!0)}}],validate:function(){this.errorModel.clear(),o.has(this,"top")&&this.top.errorModel.clear();var t=this.get("columns"),a=this.get("index");if((o.isUndefined(a)||""==String(a).replace(/^\s+|\s+$/g,""))&&(o.isUndefined(t)||o.isNull(t)||t.length<1)){var n=e("Please specify columns for %s.",e("Primary key"));return this.errorModel.set("columns",n),n}return null}})})),r.Nodes.primary_key}.apply(t,o),void 0===n||(e.exports=n)},90246:(e,t,a)=>{var o,n;a(82772);var r,i=a(77077),c=(r=a(42657))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n,r){return r.Nodes.unique_constraint||(n.Browser.Nodes.unique_constraint=r.Node.extend({type:"unique_constraint",label:e("Unique constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"unique_constraint_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_unique_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Unique constraint"),icon:"wcTabIcon icon-unique_constraint",data:{action:"create",check:!0},enable:"canCreate"}]))},canCreate:function(e,t,a){if(a&&0==a.check)return!0;for(var n=r.tree,i=t,c=e,l=[],s=!1,d=!1,u=r.tree.getTreeNodeHierarchy(i).server.version;i;){if(s||"table"!=c._type&&"partition"!=c._type||(s=!0,"is_partitioned"in c&&c.is_partitioned&&u<11e4&&(d=!0)),o.indexOf(["schema"],c._type)>-1)return!d;l.push(c._type),c=(i=n.hasParent(i)?n.parent(i):null)?n.itemData(i):null}return!(o.indexOf(l,"catalog")>-1)&&!d},getSchema:function(e,t){return new c.default({columns:function(){return(0,i.getNodeListByName)("column",e,t)},spcname:function(){return(0,i.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},index:function(){return(0,i.getNodeListByName)("index",e,t,{jumpAfterNode:"schema"})}},e)}})),r.Nodes.unique_constraint}.apply(t,o))||(e.exports=n)},56359:(e,t,a)=>{var o,n;o=[a(91669),a(19755),a(66419),a(55112),a(33883),a(5547),a(90246),a(89996),a(72474),a(12447),a(14261)],void 0===(n=function(e,t,a,o,n){return n.Nodes["coll-constraints"]||(o.Browser.Nodes["coll-constraints"]=o.Browser.Collection.extend({node:"constraints",label:e("Constraints"),type:"coll-constraints",columns:["name","comment"],canDrop:!0,canDropCascade:!0})),n.Nodes.constraints||(o.Browser.Nodes.constraints=n.Node.extend({type:"constraints",label:e("Constraints"),collection_type:"coll-constraints",parent_type:["table","partition"],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([]))}})),n.Nodes.constraints}.apply(t,o))||(e.exports=n)},66668:(e,t,a)=>{var o,n;function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}a(4129),a(41539),a(78783),a(66992),a(33948),a(69070),a(38880),a(82526),a(41817),a(32165),a(82772);var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(a,n,i):a[n]=e[n]}a.default=e,t&&t.set(e,a);return a}(a(43893)),c=a(77077);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}o=[a(91669),a(28008),a(19755),a(66419),a(72316),a(55112),a(33883),a(55455),a(12030),a(71158),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s,d,u,p){return l.Nodes["coll-index"]||(r.Browser.Nodes["coll-index"]=r.Browser.Collection.extend({node:"index",label:e("Indexes"),type:"coll-index",columns:["name","description"],hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Index size")],canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),l.Nodes.index||(r.Browser.Nodes.index=l.Node.extend({parent_type:["table","view","mview","partition"],collection_type:["coll-table","coll-view"],sqlAlterHelp:"sql-alterindex.html",sqlCreateHelp:"sql-createindex.html",dialogHelp:t("help.static",{filename:"index_dialog.html"}),type:"index",label:e("Index"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,width:l.stdW.md+"px",statsPrettifyFields:[e("Size"),e("Index size")],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_index_on_coll",node:"coll-index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index",node:"index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onMatView",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"}]))},canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema,canCreate:function(e,t,a){if(a&&0==a.check)return!0;for(var n=l.tree,r=t,i=e,c=[],s=!1,d=!1,u=n.getTreeNodeHierarchy(r).server.version;r;){if(!s&&o.indexOf(["table","partition"],i._type)>-1&&(s=!0,"is_partitioned"in i&&i.is_partitioned&&u<11e4&&(d=!0)),o.indexOf(["schema"],i._type)>-1)return!d;c.push(i._type),i=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!(o.indexOf(c,"catalog")>-1)&&!d},getSchema:function(e,t){var a=r.Browser.Nodes.index;return new i.default((function(){return(0,i.getColumnSchema)(a,e,t)}),{tablespaceList:function(){return(0,c.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},amnameList:function(){return(0,c.getNodeAjaxOptions)("get_access_methods",a,e,t,{jumpAfterNode:"schema"})},columnList:function(){return(0,c.getNodeListByName)("column",e,t,{})}},{node_info:e},{amname:"btree"})}})),l.Nodes.index}.apply(t,o))||(e.exports=n)},27587:(e,t,a)=>{var o,n;a(82772),a(32564);var r,i=a(52874),c=(r=a(55958))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(55455),a(12030),a(71158),a(56756),a(44092),a(5547)],n=function(e,t,a,o,n,r,l,s,d,u,p){return r.Nodes["coll-partition"]||(n.Browser.Nodes["coll-partition"]=n.Browser.Collection.extend({node:"partition",label:e("Partitions"),type:"coll-partition",columns:["name","schema","partition_scheme","partition_value","is_partitioned","description"],canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),r.Nodes.partition||(n.Browser.Nodes.partition=r.Node.extend({parent_type:"table",collection_type:"coll-partition",type:"partition",label:e("Partition"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Total Size"),e("Indexes size"),e("Table size"),e("TOAST table size"),e("Tuple length"),e("Dead tuple length"),e("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:t("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create"],width:"650px",Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"truncate_table",node:"partition",module:this,applies:["object","context"],callback:"truncate_table",category:e("Truncate"),priority:3,label:e("Truncate"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_cascade",node:"partition",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:e("Truncate"),priority:3,label:e("Truncate Cascade"),icon:"fa fa-eraser",enable:"canCreate"},{name:"enable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:e("Trigger(s)"),priority:4,label:e("Enable All"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable",data:{data_disabled:e("The selected tree node does not support this option.")}},{name:"disable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:e("Trigger(s)"),priority:4,label:e("Disable All"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable",data:{data_disabled:e("The selected tree node does not support this option.")}},{name:"reset_table_stats",node:"partition",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:e("Reset Statistics"),icon:"fa fa-chart-bar",enable:"canCreate"},{name:"detach_partition",node:"partition",module:this,applies:["object","context"],callback:"detach_partition",priority:2,label:e("Detach Partition"),icon:"fa fa-remove"},{name:"count_table_rows",node:"partition",module:r.Nodes.table,applies:["object","context"],callback:"count_table_rows",category:"Count",priority:2,label:e("Count Rows"),enable:!0}]))},generate_url:function(e,t,a,n,i){return-1==o.indexOf(["stats","statistics","dependency","dependent","reset","get_relations","get_oftype","get_attach_tables"],t)?r.Node.generate_url.apply(this,arguments):("statistics"==t&&(t="stats"),i=o.isUndefined(e)||o.isNull(e)?i||{}:r.tree.getTreeNodeHierarchy(e),p.sprintf("table/%s/%s/%s/%s/%s/%s",encodeURIComponent(t),encodeURIComponent(i.server_group._id),encodeURIComponent(i.server._id),encodeURIComponent(i.database._id),encodeURIComponent(i.partition.schema_id),encodeURIComponent(i.partition._id)))},on_done:function(e,t,a,o){1==e.success&&(c.default.success(e.info),a.removeIcon(o),t.icon="icon-partition",a.addIcon(o,{icon:t.icon}),a.unload(o),a.setInode(o),a.deselect(o),setTimeout((function(){a.select(o)}),10))},canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema,callbacks:{enable_triggers_on_table:function(e){this.callbacks.set_triggers.apply(this,[e,{is_enable_trigger:"O"}])},disable_triggers_on_table:function(e){this.callbacks.set_triggers.apply(this,[e,{is_enable_trigger:"D"}])},set_triggers:function(e,t){var o=e||{},n=r.tree,i=o.item||n.selected(),l=i?n.itemData(i):void 0;if(!l)return!1;a.ajax({url:this.generate_url(i,"set_trigger",l,!0),type:"PUT",data:t,dataType:"json"}).done((function(e){1==e.success&&(c.default.success(e.info),n.unload(i),n.setInode(i),n.deselect(i),setTimeout((function(){n.select(i)}),10))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),n.unload(i)}))},truncate_table:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!1}])},truncate_table_cascade:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!0}])},truncate:function(t,o){var n=t||{},i=this,l=r.tree,s=n.item||l.selected(),d=s?l.itemData(s):void 0;if(!d)return!1;c.default.confirm(e("Truncate Table"),e("Are you sure you want to truncate table %s?",d.label),(function(){var e=d;a.ajax({url:i.generate_url(s,"truncate",d,!0),type:"PUT",data:o,dataType:"json"}).done((function(t){i.on_done(t,e,l,s)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),l.unload(s)}))}))},reset_table_stats:function(t){var o=t||{},n=this,i=r.tree,l=o.item||i.selected(),s=l?i.itemData(l):void 0;if(!s)return!1;c.default.confirm(e("Reset statistics"),e('Are you sure you want to reset the statistics for table "%s"?',s._label),(function(){var e=s;a.ajax({url:n.generate_url(l,"reset",s,!0),type:"DELETE"}).done((function(t){n.on_done(t,e,i,l)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),i.unload(l)}))}),(function(){}))},detach_partition:function(t){var o=t||{},n=this,i=r.tree,l=o.item||i.selected(),s=l?i.itemData(l):void 0;if(!s)return!1;c.default.confirm(e("Detach Partition"),e("Are you sure you want to detach the partition %s?",s._label),(function(){a.ajax({url:n.generate_url(l,"detach",s,!0),type:"PUT"}).done((function(e){if(1==e.success){c.default.success(e.info);var t=i.next(l);t||(t=i.prev(l))||(t=i.parent(l)),i.remove(l),t&&i.select(t)}})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a)}))}),(function(){}))}},getSchema:function(e,t){return(0,i.getNodePartitionTableSchema)(e,t,r)},canCreate:u.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function(e,t,a){if(this.canCreate.apply(this,[e,t,a]))return e.tigger_count>0},canCreate_with_trigger_disable:function(e,t,a){if(this.canCreate.apply(this,[e,t,a]))return e.tigger_count>0&&e.has_enable_triggers>0}})),r.Nodes.partition}.apply(t,o),void 0===n||(e.exports=n)},57617:(e,t,a)=>{var o,n,r,i=(r=a(55923))&&r.__esModule?r:{default:r},c=a(77077);o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(55455),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,l,s,d){return r.Nodes["coll-row_security_policy"]||(n.Browser.Nodes["coll-row_security_policy"]=n.Browser.Collection.extend({node:"row_security_policy",label:e("RLS Policies"),type:"coll-row_security_policy",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),r.Nodes.row_security_policy||(n.Browser.Nodes.row_security_policy=r.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"row_security_policy",label:e("RLS Policy"),hasSQL:!0,hasDepends:!0,width:r.stdW.sm+"px",sqlAlterHelp:"sql-alterpolicy.html",sqlCreateHelp:"sql-createpolicy.html",dialogHelp:t("help.static",{filename:"rls_policy_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_row_security_policy_on_coll",node:"coll-row_security_policy",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_row_security_policy",node:"row_security_policy",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_row_security_policy_on_coll",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:6,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"}]))},canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new i.default({role:function(){return(0,c.getNodeListByName)("role",e,t,{},(function(){return!0}),(function(e){return e.unshift({label:"PUBLIC",value:"public"}),e}))},nodeInfo:e})},canCreate:function(e,t){var a=r.tree.getTreeNodeHierarchy(t),o=a.server;return null==a.catalog&&!(o&&o.version<90500)}})),r.Nodes.row_security_policy}.apply(t,o))||(e.exports=n)},28969:(e,t,a)=>{var o,n;a(32564),a(82772);var r=c(a(49663)),i=c(a(55958));function c(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(56756)],void 0===(n=function(e,t,a,o,n,c,l,s){return c.Nodes["coll-rule"]||(n.Browser.Nodes["coll-rule"]=n.Browser.Collection.extend({node:"rule",label:e("Rules"),type:"coll-rule",columns:["name","owner","comment"],canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:s.isTreeItemOfChildOfSchema})),c.Nodes.rule||(n.Browser.Nodes.rule=c.Node.extend({parent_type:["table","view","partition"],type:"rule",sqlAlterHelp:"sql-alterrule.html",sqlCreateHelp:"sql-createrule.html",dialogHelp:t("help.static",{filename:"rule_dialog.html"}),label:e("rule"),collection_type:"coll-table",hasSQL:!0,hasDepends:!0,canDrop:function(e,t){return s.isTreeItemOfChildOfSchema.apply(this,[e,t]),!o.has(e,"label")||"_RETURN"!==e.label},canDropCascade:function(e,t){return s.isTreeItemOfChildOfSchema.apply(this,[e,t]),!o.has(e,"label")||"_RETURN"!==e.label},url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,c.add_menus([{name:"create_rule_on_coll",node:"coll-rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"enable_rule",node:"rule",module:this,applies:["object","context"],callback:"enable_rule",category:"connect",priority:3,label:e("Enable"),icon:"fa fa-check",enable:"canCreate_with_rule_enable"},{name:"disable_rule",node:"rule",module:this,applies:["object","context"],callback:"disable_rule",category:"drop",priority:3,label:e("Disable"),icon:"fa fa-times",enable:"canCreate_with_rule_disable"}]))},callbacks:{enable_rule:function(e){var t=e||{},o=c.tree,n=t.item||o.selected(),r=n?o.itemData(n):void 0;if(!r)return!1;var l=r;a.ajax({url:this.generate_url(n,"obj",r,!0),type:"PUT",data:{is_enable_rule:"O"},dataType:"json"}).done((function(){i.default.success("Rule updated."),o.removeIcon(n),l.icon="icon-rule",o.addIcon(n,{icon:l.icon}),o.unload(n),o.setInode(!1),o.deselect(n),setTimeout((function(){o.select(n)}),10)})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a),o.unload(n)}))},disable_rule:function(t){var o=t||{},n=c.tree,r=o.item||n.selected(),l=r?n.itemData(r):void 0;if(!l)return!1;var s=l;a.ajax({url:this.generate_url(r,"obj",l,!0),type:"PUT",data:{is_enable_rule:"D"},dataType:"json"}).done((function(){i.default.success("Rule updated"),n.removeIcon(r),s.icon="icon-rule-bad",n.addIcon(r,{icon:s.icon}),n.unload(r),n.setInode(!1),n.deselect(r),setTimeout((function(){n.select(r)}),10)})).fail((function(t,a,o){i.default.pgRespErrorNotify(t,o,e("Disable rule failed")),n.unload(r)}))}},getSchema:function(e,t){return new r.default({nodeInfo:e,nodeData:t})},canCreate:function(e,t,a){if(a&&!1===a.check)return!0;for(var n=c.tree,r=t,i=e;r;){if(o.indexOf(["schema"],i._type)>-1)return!0;if("coll-rule"==i._type){var l=n.hasParent(r)?n.parent(r):null,s=n.hasParent(l)?n.parent(l):null,d=n.hasParent(s)?n.parent(s):null,u=d?n.itemData(d):null;return o.isNull(u)||"catalog"!=u._type}if("view"==i._type||"table"==i._type){l=n.hasParent(r)?n.parent(r):null;var p=(s=n.hasParent(l)?n.parent(l):null)?n.itemData(s):null;return!o.isNull(p)&&"schema"==p._type}i=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!0},canCreate_with_rule_enable:function(e,t,a){return!("view"in c.tree.getTreeNodeHierarchy(t))&&("icon-rule-bad"===e.icon&&this.canCreate.apply(this,[e,t,a]))},canCreate_with_rule_disable:function(e,t,a){return!("view"in c.tree.getTreeNodeHierarchy(t))&&("icon-rule"===e.icon&&this.canCreate.apply(e,t,a))}})),c.Nodes["coll-rule"]}.apply(t,o))||(e.exports=n)},94386:(e,t,a)=>{var o,n;a(69070),a(47941),a(82526),a(57327),a(38880),a(89554),a(54747),a(49337),a(33321),a(24812),a(32564),a(21249),a(91058),a(92222);var r,i=a(54851),c=(r=a(55958))&&r.__esModule?r:{default:r};function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}o=[a(86189),a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(55455),a(12030),a(71158),a(94405),a(56756),a(5547),a(94622),a(56359)],n=function(e,t,a,o,n,r,l,d,u,p,m,_){return l.Nodes["coll-table"]||(l.Nodes["coll-table"]=l.Collection.extend({node:"table",label:t("Tables"),type:"coll-table",columns:["name","relowner","is_partitioned","description"],hasStatistics:!0,statsPrettifyFields:[t("Total Size"),t("Indexes size"),t("Table size"),t("TOAST table size"),t("Tuple length"),t("Dead tuple length"),t("Free space")],canDrop:_.isTreeItemOfChildOfSchema,canDropCascade:_.isTreeItemOfChildOfSchema})),l.Nodes.table||(l.Nodes.table=m.SchemaChildNode.extend({type:"table",label:t("Table"),collection_type:"coll-table",hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[t("Total Size"),t("Indexes size"),t("Table size"),t("TOAST table size"),t("Tuple length"),t("Dead tuple length"),t("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:a("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create","select","insert","update","delete"],width:l.stdW.lg+"px",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_table_on_coll",node:"coll-table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_table",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_table__on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!1},enable:"canCreate"},{name:"truncate_table",node:"table",module:this,applies:["object","context"],callback:"truncate_table",category:t("Truncate"),priority:3,label:t("Truncate"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_cascade",node:"table",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:t("Truncate"),priority:3,label:t("Truncate Cascade"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_identity",node:"table",module:this,applies:["object","context"],callback:"truncate_table_identity",category:t("Truncate"),priority:3,label:t("Truncate Restart Identity"),icon:"fa fa-eraser",enable:"canCreate"},{name:"enable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Enable All"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable",data:{data_disabled:t("The selected tree node does not support this option.")}},{name:"disable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Disable All"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable",data:{data_disabled:t("The selected tree node does not support this option.")}},{name:"reset_table_stats",node:"table",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:t("Reset Statistics"),icon:"fa fa-chart-bar",enable:"canCreate"},{name:"count_table_rows",node:"table",module:this,applies:["object","context"],callback:"count_table_rows",category:"Count",priority:2,label:t("Count Rows"),enable:!0}]),l.Events.on("pgadmin:browser:node:table:updated",this.onTableUpdated,this),l.Events.on("pgadmin:browser:node:type:cache_cleared",this.handle_cache,this),l.Events.on("pgadmin:browser:node:domain:cache_cleared",this.handle_cache,this))},callbacks:{enable_triggers_on_table:function(t){e.enableTriggers(l.tree,c.default,this.generate_url.bind(this),t)},disable_triggers_on_table:function(t){e.disableTriggers(l.tree,c.default,this.generate_url.bind(this),t)},truncate_table:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!1}])},truncate_table_cascade:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!0}])},truncate_table_identity:function(e){this.callbacks.truncate.apply(this,[e,{identity:!0}])},truncate:function(e,a){var n=e||{},r=this,i=l.tree,s=n.item||i.selected(),d=s?i.itemData(s):void 0;if(!d)return!1;c.default.confirm(t("Truncate Table"),t("Are you sure you want to truncate table %s?",d.label),(function(){var e=d;o.ajax({url:r.generate_url(s,"truncate",d,!0),type:"PUT",data:a,dataType:"json"}).done((function(t){1==t.success&&(c.default.success(t.info),i.removeIcon(s),e.icon=e.is_partitioned?"icon-partition":"icon-table",i.addIcon(s,{icon:e.icon}),i.unload(s),i.setInode(s),i.deselect(s),setTimeout((function(){i.select(s)}),10)),2==t.success&&c.default.error(t.info,0)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),i.unload(s)}))}),(function(){}))},reset_table_stats:function(e){var a=e||{},n=this,r=l.tree,i=a.item||r.selected(),s=i?r.itemData(i):void 0;if(!s)return!1;c.default.confirm(t("Reset statistics"),t('Are you sure you want to reset the statistics for table "%s"?',s._label),(function(){var e=s;o.ajax({url:n.generate_url(i,"reset",s,!0),type:"DELETE"}).done((function(t){1==t.success&&(c.default.success(t.info),r.removeIcon(i),e.icon=e.is_partitioned?"icon-partition":"icon-table",r.addIcon(i,{icon:e.icon}),r.unload(i),r.setInode(i),r.deselect(i),setTimeout((function(){r.select(i)}),10))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),r.unload(i)}))}),(function(){}))},count_table_rows:function(e){var t=e||{},a=l.tree,n=t.item||a.selected(),r=n?a.itemData(n):void 0;if(!r)return!1;var i=s(s({},r),{},{_type:this.type});o.ajax({url:this.generate_url(n,"count_rows",i,!0),type:"GET"}).done((function(e){c.default.success(e.info),r.rows_cnt=e.data.total_rows,a.unload(n),a.setInode(n),a.deselect(n),setTimeout((function(){a.select(n)}),10)})).fail((function(e,t,o){c.default.pgRespErrorNotify(e,o),a.unload(n)}))}},getSchema:function(e,t){return(0,i.getNodeTableSchema)(e,t,l)},model:l.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,oid:void 0,relowner:void 0,description:void 0,is_partitioned:!1},schema:[{id:"name",label:t("Name"),type:"text",mode:["properties","create","edit"],disabled:"inSchema"},{id:"oid",label:t("OID"),type:"text",mode:["properties"]},{id:"relowner",label:t("Owner"),type:"text",node:"role",mode:["properties","create","edit"],select2:{allowClear:!1},disabled:"inSchema",control:"node-list-by-name"},{id:"is_partitioned",label:t("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],visible:"isVersionGreaterThan96",readonly:function(e){return!e.isNew()}},{id:"description",label:t("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}],sessChanged:function(){return 2==n.size(this.sessAttrs)&&this.sessAttrs.autovacuum_custom&&this.sessAttrs.toast_autovacuum||1==n.size(this.sessAttrs)&&(this.sessAttrs.autovacuum_custom||this.sessAttrs.toast_autovacuum)?this.get("vacuum_table").sessChanged()||this.get("vacuum_toast").sessChanged():l.DataModel.prototype.sessChanged.apply(this)},inSchema:function(){return!(!this.node_info||!("catalog"in this.node_info))}}),canCreate_with_trigger_enable:function(e,t,a){return e.tigger_count>0&&this.canCreate.apply(this,[e,t,a])},canCreate_with_trigger_disable:function(e,t,a){return e.tigger_count>0&&e.has_enable_triggers>0&&this.canCreate.apply(this,[e,t,a])},onTableUpdated:function(e,t,a){var o,i;if(a.is_partitioned&&"affected_partitions"in a){var c,s=a.affected_partitions,d=[],u=[];if("detached"in s&&s.detached.length>0){l.removeChildTreeNodesById(e,"coll-partition",n.map(s.detached,(function(e){return parseInt(e.oid)}))),c=l.findParentTreeNodeByType(e,"schema");var p=n.groupBy(s.detached,(function(e){return parseInt(e.schema_id)}));for(o in p)if(c=l.findSiblingTreeNode(c,o)){i=n.map(p[o],(function(e){return parseInt(e.oid)}));var m=l.findChildCollectionTreeNode(c,"coll-table");m&&u.push({parent:m,type:"table",treeHierarchy:r.Browser.tree.getTreeNodeHierarchy(c),childrenIDs:n.clone(i)})}}if("attached"in s&&s.attached.length>0){c=l.findParentTreeNodeByType(e,"schema");var _=n.groupBy(s.attached,(function(e){return parseInt(e.schema_id)}));for(o in _)(c=l.findSiblingTreeNode(c,o))&&(i=n.map(_[o],(function(e){return parseInt(e.oid)})),l.removeChildTreeNodesById(c,"coll-table",i)),d=d.concat(i)}if("created"in s&&s.created.length>0&&n.each(s.created,(function(e){d.push(e.oid)})),d.length){var f=l.findChildCollectionTreeNode(e,"coll-partition");f&&u.push({parent:f,type:"partition",treeHierarchy:r.Browser.tree.getTreeNodeHierarchy(e),childrenIDs:d})}!function e(){if(u.length){var t=u.pop();l.addChildTreeNodes(t.treeHierarchy,t.parent,t.type,t.childrenIDs,e)}}()}},handle_cache:function(){this.clear_cache.apply(this,null)}})),l.Nodes.table}.apply(t,o),void 0===n||(e.exports=n)},40708:(e,t,a)=>{var o,n;a(32564);var r=a(77077),i=l(a(80136)),c=l(a(55958));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,l,s,d){return l.Nodes["coll-trigger"]||(n.Browser.Nodes["coll-trigger"]=n.Browser.Collection.extend({node:"trigger",label:e("Triggers"),type:"coll-trigger",columns:["name","description"],canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema})),l.Nodes.trigger||(n.Browser.Nodes.trigger=l.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"trigger",label:e("Trigger"),hasSQL:!0,hasDepends:!0,width:l.stdW.sm+"px",sqlAlterHelp:"sql-altertrigger.html",sqlCreateHelp:"sql-createtrigger.html",dialogHelp:t("help.static",{filename:"trigger_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_trigger_on_coll",node:"coll-trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger",node:"trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"enable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"enable_trigger",category:"connect",priority:3,label:e("Enable"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable"},{name:"disable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"disable_trigger",category:"drop",priority:3,label:e("Disable"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable"},{name:"create_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"}]))},callbacks:{enable_trigger:function(e){var t=e||{},o=l.tree,n=t.item||o.selected(),r=n?o.itemData(n):void 0;if(!r)return!1;var i=r;a.ajax({url:this.generate_url(n,"enable",r,!0),type:"PUT",data:{is_enable_trigger:"O"},dataType:"json"}).done((function(e){1==e.success&&(c.default.success(e.info),o.removeIcon(n),i.icon="icon-trigger",o.addIcon(n,{icon:i.icon}),o.unload(n),o.setInode(!1),o.deselect(n),setTimeout((function(){o.select(n)}),10))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),o.unload(n)}))},disable_trigger:function(t){var o=t||{},n=l.tree,r=o.item||n.selected(),i=r?n.itemData(r):void 0;if(!i)return!1;var s=i;a.ajax({url:this.generate_url(r,"enable",i,!0),type:"PUT",data:{is_enable_trigger:"D"},dataType:"json"}).done((function(e){1==e.success&&(c.default.success(e.info),n.removeIcon(r),s.icon="icon-trigger-bad",n.addIcon(r,{icon:s.icon}),n.unload(r),n.setInode(!1),n.deselect(r),setTimeout((function(){n.select(r)}),10))})).fail((function(t,a,o){c.default.pgRespErrorNotify(t,o,e("Disable trigger failed")),n.unload(r)}))}},canDrop:d.isTreeItemOfChildOfSchema,canDropCascade:d.isTreeItemOfChildOfSchema,getSchema:function(e,t){var a=this;return new i.default({triggerFunction:function(){return(0,r.getNodeAjaxOptions)("get_triggerfunctions",a,e,t,{cacheLevel:"trigger_function",jumpAfterNode:"schema"},(function(e){return o.reject(e,(function(e){return""==e.label}))}))},columns:function(){return(0,r.getNodeListByName)("column",e,t,{cacheLevel:"column"})},nodeInfo:e})},canCreate:d.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function(e,t,a){return!("view"in l.tree.getTreeNodeHierarchy(t))&&("icon-trigger-bad"===e.icon&&this.canCreate.apply(this,[e,t,a]))},canCreate_with_trigger_disable:function(e,t,a){return!("view"in l.tree.getTreeNodeHierarchy(t))&&("icon-trigger"===e.icon&&this.canCreate.apply(this,[e,t,a]))}})),l.Nodes.trigger}.apply(t,o))||(e.exports=n)},70929:(e,t,a)=>{var o,n;function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}a(4129),a(41539),a(78783),a(66992),a(33948),a(69070),a(38880),a(82526),a(41817),a(32165),a(68309);var i=a(77077),c=a(40345),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=o?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(a,n,i):a[n]=e[n]}a.default=e,t&&t.set(e,a);return a}(a(31434));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(71158),a(94405),a(56756),a(5547)],void 0===(n=function(e,t,a,o,n,r,s,d,u,p){return r.Nodes["coll-type"]||(r.Nodes["coll-type"]=r.Collection.extend({node:"type",label:e("Types"),type:"coll-type",columns:["name","typeowner","description"],canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),r.Nodes.type||(r.Nodes.type=u.SchemaChildNode.extend({type:"type",sqlAlterHelp:"sql-altertype.html",sqlCreateHelp:"sql-createtype.html",dialogHelp:t("help.static",{filename:"type_dialog.html"}),label:e("Type"),collection_type:"coll-type",hasSQL:!0,hasDepends:!0,width:r.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_type_on_coll",node:"coll-type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_type",node:"type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_type",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!1},enable:"canCreate"}]))},ext_funcs:void 0,getSchema:function(e,t){var a=n.Browser.Nodes.type;return new l.default((function(o){return(0,c.getNodePrivilegeRoleSchema)(a,e,t,o)}),(function(){return(0,l.getCompositeSchema)(a,e,t)}),(function(){return(0,l.getRangeSchema)(a,e,t)}),(function(){return(0,l.getExternalSchema)(a,e,t)}),(function(){return(0,l.getDataTypeSchema)(a,e,t)}),{roles:function(){return(0,i.getNodeListByName)("role",e,t,{cacheLevel:"database"})},schemas:function(){return(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},server_info:r.serverInfo[e.server._id],node_info:e},{typeowner:r.serverInfo[e.server._id].user.name,schema:"catalog"in e?e.catalog.label:e.schema.label,typtype:"c"})}})),r.Nodes.type}.apply(t,o))||(e.exports=n)},21532:(e,t,a)=>{var o,n;a(68309);var r=d(a(15151)),i=a(77077),c=a(40345),l=a(87954),s=d(a(55958));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(55455),a(33883),a(12030),a(94405),a(56756),a(44092),a(63563)],void 0===(n=function(e,t,a,o,n,d,u,p,m,_,f){return u.Nodes["coll-mview"]||(u.Nodes["coll-mview"]=u.Collection.extend({node:"mview",label:e("Materialized Views"),type:"coll-mview",columns:["name","owner","comment"],canDrop:_.isTreeItemOfChildOfSchema,canDropCascade:_.isTreeItemOfChildOfSchema})),u.Nodes.mview||(u.Nodes.mview=m.SchemaChildNode.extend({type:"mview",sqlAlterHelp:"sql-altermaterializedview.html",sqlCreateHelp:"sql-creatematerializedview.html",dialogHelp:t("help.static",{filename:"materialized_view_dialog.html"}),label:e("Materialized View"),hasSQL:!0,hasDepends:!0,hasScriptTypes:["create","select"],collection_type:"coll-mview",width:u.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,n.Browser.add_menu_category("refresh_mview",e("Refresh View"),18,""),u.add_menus([{name:"create_mview_on_coll",node:"coll-mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,icon:"wcTabIcon icon-mview",data:{action:"create",check:!0},enable:"canCreate",label:e("Materialized View...")},{name:"create_mview",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,icon:"wcTabIcon icon-mview",data:{action:"create",check:!0},enable:"canCreate",label:e("Materialized View...")},{name:"create_mview",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:18,icon:"wcTabIcon icon-mview",data:{action:"create",check:!1},enable:"canCreate",label:e("Materialized View...")},{name:"refresh_mview_data",node:"mview",module:this,priority:1,callback:"refresh_mview",category:"refresh_mview",applies:["object","context"],label:e("With data"),data:{concurrent:!1,with_data:!0},icon:"fa fa-recycle"},{name:"refresh_mview_nodata",node:"mview",callback:"refresh_mview",priority:2,module:this,category:"refresh_mview",applies:["object","context"],label:e("With no data"),data:{concurrent:!1,with_data:!1},icon:"fa fa-sync-alt"},{name:"refresh_mview_concurrent",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:!0,with_data:!0},priority:3,applies:["object","context"],callback:"refresh_mview",label:e("With data (concurrently)"),icon:"fa fa-recycle"},{name:"refresh_mview_concurrent_nodata",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:!0,with_data:!1},priority:4,applies:["object","context"],callback:"refresh_mview",label:e("With no data (concurrently)"),icon:"fa fa-sync-alt"}]))},getSchema:function(e,t){var a=this;return new r.default((function(a){return(0,c.getNodePrivilegeRoleSchema)("",e,t,a)}),(function(){return(0,l.getNodeVacuumSettingsSchema)(a,e,t)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},spcname:function(){return(0,i.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},nodeInfo:e},{owner:u.serverInfo[e.server._id].user.name,schema:e.schema.label})},refresh_mview:function(t){var o=t||{},n=this,r=u.tree,i=o.item||r.selected(),c=i?r.itemData(i):void 0,l=null;if(!c)return!1;for(var p=i;p;){var m=u.tree.itemData(p);if("server"==m._type){l=m;break}if(!u.tree.hasParent(p)){s.default.alert(e("Please select server or child node from tree."));break}p=u.tree.parent(p)}l&&f.hasBinariesConfiguration(u,l,d)&&a.ajax({url:n.generate_url(i,"check_utility_exists",c,!0),type:"GET",dataType:"json"}).done((function(o){o.success?a.ajax({url:n.generate_url(i,"refresh_data",c,!0),type:"PUT",data:{concurrent:t.concurrent,with_data:t.with_data},dataType:"json"}).done((function(t){t.data&&t.data.status?(s.default.success(t.data.info),u.Events.trigger("pgadmin-bgprocess:created",n)):s.default.alert(e("Failed to create materialized view refresh job."),t.errormsg)})).fail((function(t,a,o){s.default.pgRespErrorNotify(t,o,e("Failed to create materialized view refresh job."))})):s.default.alert(e("Utility not found"),o.errormsg)})).fail((function(){s.default.alert(e("Utility not found"),e("Failed to fetch Utility information"))}))},is_version_supported:function(e,t){var a=n.Browser.tree,r=t||a.selected(),i=a&&a.getTreeNodeHierarchy(r);return(o.isUndefined(i)?0:i.server.version)>=90400}})),u.Nodes.mview}.apply(t,o))||(e.exports=n)},12e3:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=a(40345),l=(r=a(45193))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(12030),a(94405),a(56756),a(63563),a(28969)],void 0===(n=function(e,t,a,o,n,r,s,d,u){return r.Nodes["coll-view"]||(r.Nodes["coll-view"]=r.Collection.extend({node:"view",label:e("Views"),type:"coll-view",columns:["name","owner","comment"],canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),r.Nodes.view||(r.Nodes.view=d.SchemaChildNode.extend({type:"view",sqlAlterHelp:"sql-alterview.html",sqlCreateHelp:"sql-createview.html",dialogHelp:t("help.static",{filename:"view_dialog.html"}),label:e("View"),hasSQL:!0,hasDepends:!0,hasScriptTypes:["create","select","insert"],collection_type:"coll-view",Init:function(){this.initialized||(this.initialized=!0,r.add_menus([{name:"create_view_on_coll",node:"coll-view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_view",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_view",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:17,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){return new l.default((function(a){return(0,c.getNodePrivilegeRoleSchema)("",e,t,a)}),e,{role:function(){return(0,i.getNodeListByName)("role",e,t)},schema:function(){return(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"})}},{owner:r.serverInfo[e.server._id].user.name,schema:e.schema?e.schema.label:""})}})),r.Nodes.view}.apply(t,o))||(e.exports=n)},68169:(e,t,a)=>{var o,n;a(92222),a(32564),a(68309),a(64765),a(74916);var r=a(77077),i=a(40345),c=a(14511),l=u(a(82234)),s=u(a(55958)),d=a(10075);function u(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(44092),a(55112),a(7027),a(55455),a(12030),a(10426),a(5547),a(63563),a(64096)],void 0===(n=function(e,t,a,o,n,u,p,m,_,f){if(p.Nodes["coll-database"]||(p.Nodes["coll-database"]=p.Collection.extend({node:"database",label:e("Databases"),type:"coll-database",columns:["name","datowner","comments"],hasStatistics:!0,canDrop:!0,selectParentNodeOnDelete:!0,canDropCascade:!1,statsPrettifyFields:[e("Size"),e("Size of temporary files")]})),!p.Nodes.database){p.Nodes.database=p.Node.extend({parent_type:"server",type:"database",sqlAlterHelp:"sql-alterdatabase.html",sqlCreateHelp:"sql-createdatabase.html",dialogHelp:t("help.static",{filename:"database_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Size of temporary files")],canDrop:function(e){return e.canDrop},selectParentNodeOnDelete:!0,label:e("Database"),node_image:function(){return"pg-icon-database"},width:"700px",Init:function(){this.initialized||(this.initialized=!0,p.add_menus([{name:"create_database_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"create_database_on_coll",node:"coll-database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"create_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"connect_database",node:"database",module:this,applies:["object","context"],callback:"connect_database",category:"connect",priority:4,label:e("Connect Database"),icon:"fa fa-link",enable:"is_not_connected",data:{data_disabled:e("Selected database is already connected.")}},{name:"disconnect_database",node:"database",module:this,applies:["object","context"],callback:"disconnect_database",category:"drop",priority:5,label:e("Disconnect from database"),icon:"fa fa-unlink",enable:"is_connected",data:{data_disabled:e("Selected database is already disconnected.")}},{name:"generate_erd",node:"database",module:this,applies:["object","context"],callback:"generate_erd",category:"erd",priority:5,label:e("Generate ERD")}]),o.bindAll(this,"connection_lost"),p.Events.on("pgadmin:database:connection:lost",this.connection_lost))},can_create_database:function(e,t){var a=p.tree.getTreeNodeHierarchy(t).server;return a.connected&&a.user.can_create_db},canCreate:function(e,t){var a=p.tree.getTreeNodeHierarchy(t).server;return!(a&&a.version<1e5)},is_not_connected:function(e){return e&&1!=e.connected&&1==e.allowConn},is_connected:function(e){return e&&1==e.connected&&1==e.canDisconn},is_psql_enabled:function(e){return e&&1==e.connected&&u.enable_psql},is_conn_allow:function(e){return e&&1==e.allowConn},connection_lost:function(t,a,n){if(p.tree){for(var r=p.tree,i=t&&r.itemData(t),c=this;i&&"database"!=i._type;)t=r.parent(t),i=t&&r.itemData(t);if(t&&i){if(!i.allowConn)return!1;if(o.isUndefined(i.is_connecting)||!i.is_connecting){i.is_connecting=!0;if(p.Events.on("pgadmin:database:connect:cancelled",(function e(t,a){a._id==this._id&&(i.is_connecting=!1,p.Events.off("pgadmin:database:connect:cancelled",e),a=(t=t&&r.parent(t))&&r.itemData(t),t&&a&&p.Events.trigger("pgadmin:server:disconnect",{item:t,data:a},!1))})),n)return void h(c,i,r,t,!0);s.default.confirm(e("Connection lost"),e("Would you like to reconnect to the database?"),(function(){h(c,i,r,t,!0)}),(function(){i.is_connecting=!1,r.unload(t),r.setInode(t),r.addIcon(t,{icon:"icon-database-not-connected"}),p.Events.trigger("pgadmin:database:connect:cancelled",t,i,c)}))}}}},callbacks:{connect_database:function(e){var t=e||{},a=p.tree,o=t.item||a.selected(),n=o?a.itemData(o):void 0;return n&&"template0"!=n.label&&b(this,n,a,o,!0),!1},disconnect_database:function(t){var n=t||{},r=this,i=p.tree,c=n.item||i.selected(),l=c?i.itemData(c):void 0;return l&&s.default.confirm(e("Disconnect from database"),e("Are you sure you want to disconnect from database - %s?",l.label),(function(){var e=l;a.ajax({url:r.generate_url(c,"connect",l,!0),type:"DELETE"}).done((function(t){if(1==t.success){var a=i.parent(c);t.data.info_prefix&&(t.info="".concat(o.escape(t.data.info_prefix)," - ").concat(t.info)),s.default.success(o.unescape(t.info)),i.removeIcon(c),e.connected=!1,e.icon="icon-database-not-connected",i.addIcon(c,{icon:e.icon}),i.unload(c),p.Events.trigger("pgadmin:browser:tree:update-tree-state",c),setTimeout((function(){i.select(a)}),10)}else{try{s.default.error(t.errormsg)}catch(e){console.warn(e.stack||e)}i.unload(c)}})).fail((function(e,t,a){s.default.pgRespErrorNotify(e,a),i.unload(c)}))}),(function(){return!0})),!1},generate_erd:function(e){var t=e||{},a=p.tree,o=t.item||a.selected(),n=o?a.itemData(o):void 0;p.erd.showErdTool(n,o,!0)},beforeopen:function(e,t){return!(!t||"database"!=t._type||"template0"==t.label)&&(p.tree.addIcon(e,{icon:t.icon}),!(!t.connected&&t.allowConn&&!t.is_connecting)||(t.is_connecting=!0,b(this,t,p.tree,e,!0),!1))},selected:function(e,t){return!(!t||"database"!=t._type)&&(p.tree.addIcon(e,{icon:t.icon}),t.connected||!t.allowConn||t.is_connecting||(t.is_connecting=!0,b(this,t,p.tree,e,!1)),p.Node.callbacks.selected.apply(this,arguments))},refresh:function(e,t){var a=p.tree,o=t||a.selected(),n=a.itemData(o);n.allowConn&&p.Node.callbacks.refresh.apply(this,arguments)}},getSchema:function(e,t){var a=this,n=function(){return(0,r.getNodeAjaxOptions)("get_ctypes",a,e,t,{cacheLevel:"server"})};return new l.default((function(){return(0,c.getNodeVariableSchema)(a,e,t,!1,!0)}),(function(o){return(0,i.getNodePrivilegeRoleSchema)(a,e,t,o)}),{role:function(){return(0,r.getNodeListByName)("role",e,t)},encoding:function(){return(0,r.getNodeAjaxOptions)("get_encodings",a,e,t,{cacheLevel:"server"})},template:function(){return(0,r.getNodeAjaxOptions)("get_databases",a,e,t,{cacheLevel:"server"},(function(e){var t=[];return e&&o.isArray(e)&&o.each(e,(function(e){t.push({label:e,value:e,image:"pg-icon-database"})})),t}))},spcname:function(){return(0,r.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},datcollate:n,datctype:n},{datowner:p.serverInfo[e.server._id].user.name})}}),p.SecurityGroupSchema={id:"security",label:e("Security"),type:"group",visible:function(e){return!e||!("node_info"in e)||!("catalog"in(e.node_info||e.handler.node_info))}};var b=function(e,t,a,o,n){h(e,t,a,o,n)},h=function(t,o,n,r,i){var c=i||o.connected,l=function t(a,r,c,l,p,_,h,g){(o.is_connecting=!1,200!=a.status&&-1!==a.responseText.search("Ticket expired"))?(n.addIcon(h,{icon:"icon-server-connecting"}),f.fetch_ticket().then((function(){b(l,p,_,h,i)}),(function(t){n.setInode(h),n.addIcon(h,{icon:"icon-database-not-connected"}),s.default.pgNotifier(t,a,e("Connect  to database."))}))):(g||(n.setInode(h),n.addIcon(h,{icon:"icon-database-not-connected"})),s.default.pgNotifier("error",a,c,(function(a){setTimeout((function(){"CRYPTKEY_SET"==a?b(l,p,_,h,i):(0,d.showServerPassword)(e("Connect to database"),a,l,p,_,h,g,u,t,m)}),100)})))},u=function(a,o,n,r,i,c){n.is_connecting=!1,a&&a.data&&("boolean"==typeof a.data.connected&&(n.connected=a.data.connected),"string"==typeof a.data.icon&&(r.removeIcon(i),n.icon=a.data.icon,r.addIcon(i,{icon:n.icon})),a.data.already_connected&&(a.info=e("Database already connected.")),a.data.info_prefix&&(a.info="".concat(a.data.info_prefix," - ").concat(a.info)),a.data.already_connected?s.default.info(a.info):s.default.success(a.info),t.trigger("connected",t,i,n),p.Events.trigger("pgadmin:database:connected",i,n),p.enable_disable_menus.apply(p,[i]),c||setTimeout((function(){r.select(i),r.open(i)}),10))},m=function(e,a,o){o.is_connecting=!1;var n=e.parent(a);e.unload(a),e.setInode(a),e.removeIcon(a),e.addIcon(a,{icon:"icon-database-not-connected"}),t.trigger("connect:cancelled",t,a,o),p.Events.trigger("pgadmin:database:connect:cancelled",a,o,t),e.select(n)};a.post(t.generate_url(r,"connect",o,!0)).done((function(e){if(1==e.success)return u(e,t,o,n,r,c)})).fail((function(a,i,s){return 410===a.status&&(s=e("Error: Object not found - %s.",s)),l(a,0,s,t,o,n,r,c)}))}}return p.Nodes["coll-database"]}.apply(t,o))||(e.exports=n)},23612:(e,t,a)=>{var o,n;a(88674),a(41539),a(68309);var r=a(77077),i=d(a(77826)),c=d(a(2832)),l=d(a(96486)),s=d(a(55958));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(33883),a(5547)],void 0===(n=function(e,t,a,o,n){return n.Nodes["coll-subscription"]||(n.Nodes["coll-subscription"]=n.Collection.extend({node:"subscription",label:e("Subscriptions"),type:"coll-subscription",columns:["name","subowner","proppub","enabled"],hasStatistics:!0})),n.Nodes.subscription||(n.Nodes.subscription=n.Node.extend({parent_type:"database",type:"subscription",sqlAlterHelp:"sql-altersubscription.html",sqlCreateHelp:"sql-createsubscription.html",dialogHelp:t("help.static",{filename:"subscription_dialog.html"}),label:e("Subscription"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,hasStatistics:!0,width:"501px",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_subscription_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:n.Nodes.database.canCreate},{name:"create_subscription_on_coll",node:"coll-subscription",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:"canCreate"},{name:"create_subscription",node:"subscription",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(t,a){return new i.default({role:function(){return(0,r.getNodeListByName)("role",t,a)},getPublication:function(o,r,i,d,u,p,m,_,f,b,h,g,y){return new Promise((function(v,w){var N=(0,c.default)();if(null!=o&&null!=i&&null!=d&&null!=u){var C=n.Nodes.cast.generate_url.apply(n.Nodes.subscription,[null,"get_publications",a,!1,t]);N.get(C,{params:{host:o,password:r,port:i,username:d,db:u,connectTimeout:p,passfile:m,sslmode:_,sslcompression:f,sslcert:b,sslkey:h,sslrootcert:g,sslcrl:y}}).then((function(t){""!==t.data.errormsg||l.default.isNull(t.data.data)?!l.default.isNull(t.data.errormsg)&&l.default.isNull(t.data.data)&&(w(t.data.errormsg),s.default.alert(e("Check connection?"),e(t.data.errormsg))):(v(t.data.data),s.default.info(e("Publication fetched successfully.")))})).catch((function(e){w(e)}))}}))}},{node_info:t.server},{subowner:n.serverInfo[t.server._id].user.name})}})),n.Nodes["coll-subscription"]}.apply(t,o))||(e.exports=n)},84102:(e,t,a)=>{var o,n,r,i=(r=a(49988))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(66419),a(33883),a(5547)],void 0===(n=function(e,t,a,o){return o.Nodes["coll-resource_group"]||(o.Nodes["coll-resource_group"]=o.Collection.extend({node:"resource_group",label:e("Resource Groups"),type:"coll-resource_group",columns:["name","cpu_rate_limit","dirty_rate_limit"],canDrop:!0,canDropCascade:!1})),o.Nodes.resource_group||(o.Nodes.resource_group=o.Node.extend({parent_type:"server",type:"resource_group",epasHelp:!0,dialogHelp:t("help.static",{filename:"resource_group_dialog.html"}),label:e("Resource Group"),hasSQL:!0,canDrop:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_resourcegroup_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")},enable:function(e,t){return o.tree.getTreeNodeHierarchy(t).server.connected&&"ppas"===e.server_type&&e.version>=90400}},{name:"create_resource_group_on_coll",node:"coll-resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")}},{name:"create_resource_group",node:"resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")}}]))},getSchema:function(){return new i.default},model:o.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"cpu_rate_limit",label:e("CPU rate limit (percentage)"),cell:"string",type:"numeric",min:0,max:16777216},{id:"dirty_rate_limit",label:e("Dirty rate limit (KB)"),cell:"string",type:"numeric",min:0,max:16777216}]})})),o.Nodes["coll-resource_group"]}.apply(t,o))||(e.exports=n)},75945:(e,t,a)=>{var o,n;a(69826),a(73210),a(91058),a(5735),a(83753),a(68309),a(32564);var r=d(a(61231)),i=a(14511),c=a(77077),l=a(3011),s=d(a(55958));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(33883),a(58307),a(12030),a(9669),a(44092),a(72316),a(20454),a(5547),a(75270),a(64096)],void 0===(n=function(e,t,a,o,n,d,u,p,m,_,f){return d.Nodes["coll-role"]||(n.Browser.Nodes["coll-role"]=n.Browser.Collection.extend({node:"role",label:e("Login/Group Roles"),type:"coll-role",columns:["rolname","rolvaliduntil","rolconnlimit","rolcanlogin","rolsuper","rolcreaterole","rolcreatedb","rolcatupdate","rolinherit","rolreplication"],canDrop:!0,canDropCascade:!1})),d.Nodes.role||(n.Browser.Nodes.role=n.Browser.Node.extend({parent_type:"server",type:"role",sqlAlterHelp:"sql-alterrole.html",sqlCreateHelp:"sql-createrole.html",dialogHelp:t("help.static",{filename:"role_dialog.html"}),label:e("Login/Group Role"),hasSQL:!0,width:"550px",canDrop:function(e,t){var a=d.tree.getTreeNodeHierarchy(t).server;return e.is_superuser?a.connected&&a.user.is_superuser:a.connected&&a.user.can_create_role},hasDepends:!0,node_label:function(e){return e.label},node_image:function(e){return e?e.can_login?"icon-role":"icon-group":"icon-role"},title:function(t){return t?t.can_login?e("Login Role")+" - "+t.label:e("Group Role")+" - "+t.label:this.label},Init:function(){this.initialized||(this.initialized=!0,d.add_menus([{name:"create_role_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"create_role_on_roles",node:"coll-role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"create_role",node:"role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"reassign_role",node:"role",module:this,applies:["object","context"],callback:"reassign_role",category:"role",priority:5,label:e("Reassign/Drop Owned..."),icon:"wcTabIcon icon-role",enable:"can_reassign_role"}]))},can_create_role:function(e,t){var a=d.tree.getTreeNodeHierarchy(t).server;return a.connected&&a.user.can_create_role},can_reassign_role:function(e,t){return d.tree.getTreeNodeHierarchy(t).server.connected&&e.can_login},reassign_role:function(){var r,i,c=d.tree,l=c.selected(),b=l?c.itemData(l):void 0,h=this,g=f.Model.extend({idAttribute:"id",defaults:{role_op:void 0,did:void 0,new_role_id:void 0,new_role_name:void 0,old_role_name:void 0,drop_with_cascade:!1},initialize:function(){f.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"role_op",label:e("Operation"),cell:"string",type:"radioModern",controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",group:e("General"),options:[{label:"Reassign",value:"reassign"},{label:"Drop",value:"drop"}],helpMessage:e("Change the ownership or\ndrop the database objects owned by a database role")},{id:"new_role_name",label:e("Reassign objects to"),controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",url:"nodes",helpMessage:e("New owner of the affected objects"),transform:function(e,t){var a=[],n=t||this,r=n.field.get("schema_node"),i=n.field.attributes.node_info.role.label;if(e&&o.isArray(e)){var c={label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-"+r.type,_id:null},l={label:"SESSION_USER",value:"SESSION_USER",image:"icon-"+r.type,_id:null};if(c.value=JSON.stringify(c),l.value=JSON.stringify(l),a.push(c,l),n.field.attributes.node_data.version>=14e4){var s={label:"CURRENT_ROLE",value:"CURRENT_ROLE",image:"icon-"+r.type,_id:null};s.value=JSON.stringify(s),a.push(s)}o.each(e,(function(e){i!=e.label&&a.push({label:e.label,image:e.icon,value:JSON.stringify(e)})}))}return a},control:p.NodeListByIdControl.extend({getValueFromDOM:function(){var e=this.formatter.toRaw(o.unescape(this.$el.find("select").val()),this.model);return""===e?null:("string"==typeof e&&(e=JSON.parse(e)),e.label)},onChange:function(){p.NodeAjaxOptionsControl.prototype.onChange.apply(this,arguments);var e=this.$el.find("select").val();if(""!=e.trim()){var t=this.formatter.toRaw(e,this.model);"string"==typeof t&&(t=JSON.parse(t)),this.model.set({new_role_id:t._id,new_role_name:t.label})}}}),node:"role",group:e("General"),select2:{allowClear:!1},disabled:"isDisabled",deps:["role_op"],filter:function(e){var t=d.tree,a=t.selected(),o=a&&1==a.length?t.itemData(a):void 0;return!o||e&&e.label!=o.label}},{id:"drop_with_cascade",label:e("Cascade?"),cell:"string",type:"switch",controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",disabled:"isDisabled",group:e("General"),options:{onText:e("Yes"),offText:e("No"),size:"mini"},deps:["role_op"],helpMessage:e("Note: CASCADE will automatically drop objects that depend on the affected objects, and in turn all objects that depend on those objects")},{id:"did",label:e("From database"),controlsClassName:"pgadmin-controls col-12 col-sm-8",controlLabelClassName:"control-label col-sm-4 col-12",node:"database",group:e("General"),disabled:"isDisabled",control:p.NodeListByIdControl.extend({onChange:function(){p.NodeListByIdControl.prototype.onChange.apply(this,arguments);var e=this.model.get("did");this.model.set("did",parseInt(e))}}),select2:{allowClear:!1},events:{"select2:select":"onChange"},first_empty:!1,helpMessage:e("Target database on which the operation will be carried out")},{id:"sqltab",label:e("SQL"),group:e("SQL"),type:"text",disabled:!1,control:p.SqlTabControl.extend({initialize:function(){p.SqlTabControl.prototype.initialize.apply(this,arguments)},onTabChange:function(e){if(this.dialog&&e.shown==this.tabIndex){var t,o=this,n=o.model.toJSON();n.old_role_name=i,t=h.generate_url(l,"reassign",b,!0),a.ajax({url:t,type:"GET",cache:!1,data:n,dataType:"json",contentType:"application/json"}).done((function(e){o.sqlCtrl.setValue(e.data)}))}}})}],validate:function(){return null},isDisabled:function(e){var t=this;switch(this.name){case"new_role_name":return"reassign"!=e.get("role_op");case"drop_with_cascade":return"drop"!=e.get("role_op");case"did":return setTimeout((function(){if(o.isUndefined(e.get("did"))){var a=t.options[0];e.set("did",a.value)}}),10),!1;default:return!1}}});b&&(u.roleReassignDialog||u.dialog("roleReassignDialog",(function(){return{main:function(e){this.set("title",e)},setup:function(){return{buttons:[{text:"",key:112,className:"btn btn-primary-icon pull-left fa fa-question pg-alertify-icon-button",attrs:{name:"dialog_help",type:"button",label:e("Users"),url:t("help.static",{filename:"role_reassign_dialog.html"})}},{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-lg fa-times pg-alertify-button"},{text:e("OK"),key:13,className:"btn btn-primary fa fa-lg fa-save pg-alertify-button"}],focus:{element:0},options:{padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1}}},build:function(){u.pgDialogBuild.apply(this)},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})}},prepare:function(){var t=this,n=a("<div class='role_reassign_own'></div>");t.__internal.buttons[2].element.disabled=!0;var c=d.tree,l=c.selected(),s=l?c.itemData(l):void 0,u=s&&d.Nodes[s._type];if(r=h.generate_url(l,"reassign",s,!0),i=s.label,s){var m=d.tree.getTreeNodeHierarchy(l),_=new g({},{node_info:m}),f=p.generateViewSchema(m,_,"create",u,m.server,!0),b=t.view=new p.Dialog({el:n,model:_,schema:f});a(t.elements.body.childNodes[0]).addClass("alertify_tools_dialog_properties obj_properties"),b.render(),t.elements.content.append(n.get(0));var y=a('<div class=\'pg-prop-status-bar pg-prop-status-bar-absolute pg-el-xs-12 d-none\'>  <div class="error-in-footer">     <div class="d-flex px-2 py-1">       <div class="pr-2">         <i class="fa fa-exclamation-triangle text-danger" aria-hidden="true"></i>       </div>       <div class="alert-text" role="alert"></div>        <div class="ml-auto close-error-bar">           <a aria-label="'+e("Close error bar")+'" class="close-error fa fa-times text-danger"></a>         </div>     </div>   </div> </div>').appendTo(n);this.view.model.on("change",(function(){var a,n,r=this;if(y.addClass("d-none"),"reassign"!=this.get("role_op")||o.isUndefined(this.get("new_role_name")&&""!==this.get("new_role_name")))if("drop"==this.get("role_op"))this.errorModel.clear(),this.set({new_role_name:void 0,silent:!0}),this.set({new_role_id:void 0,silent:!0}),t.__internal.buttons[2].element.disabled=!1;else if(o.isUndefined(this.get("new_role_name"))){var i=e("Please provide a new role name");this.errorModel.set("new_role_name",i),a="new_role_name",n=i,r.errorModel.set(a,n),y.removeClass("d-none"),y.find(".alert-text").html(n),t.elements.dialog.querySelector(".close-error").addEventListener("click",(function(){y.addClass("d-none"),r.errorModel.set(a,n)})),t.__internal.buttons[2].element.disabled=!0}else t.__internal.buttons[2].element.disabled=!0;else this.errorModel.clear(),t.__internal.buttons[2].element.disabled=!1})),this.view.model.set({role_op:"reassign"})}},callback:function(t){if("dialog_help"==t.button.element.name)return t.cancel=!0,void d.showHelp(t.button.element.name,t.button.element.getAttribute("url"),null,null);if(t.button.text===e("OK")){var a=this.view.model.toJSON(),o=a.role_op,n=_.titleize(o);s.default.confirm(e("%s Objects",n),e("Are you sure you wish to %s all the objects owned by the selected role?",o),(function(){m.post(r,a).then((function(e){e.data&&s.default.success(e.data.info)})).catch((function(t){try{var a=t.response.data;s.default.alert(e("Role reassign/drop failed."),a.errormsg)}catch(e){console.warn(e.stack||e)}}))}),(function(){return!0})).set("labels",{ok:e("Yes"),cancel:e("No")})}}}})),u.roleReassignDialog(e("Reassign/Drop Owned - '%s'",b.label)).resizeTo(n.Browser.stdW.md,n.Browser.stdH.lg))},getSchema:function(e,t){var a=this;return new r.default((function(){return(0,i.getNodeVariableSchema)(a,e,t,!0,!1)}),(function(){return(0,l.getMembershipSchema)(a,e,t)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)},nodeInfo:e})}})),d.Nodes.role}.apply(t,o))||(e.exports=n)},44588:(e,t,a)=>{var o,n;a(15306),a(74916),a(32564),a(68309),a(5735),a(83753),a(64765);var r=a(77077),i=s(a(43547)),c=s(a(55958)),l=a(10075);function s(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(66419),a(72316),a(55112),a(33883),a(93584),a(55455),a(12030),a(10426),a(63563)],void 0===(n=function(e,t,a,o,n,s,d,u,p,m,_){if(!d.Nodes.server){d.SecLabelModel=d.Node.Model.extend({defaults:{provider:void 0,label:void 0},schema:[{id:"provider",label:e("Provider"),type:"text",editable:!0,cellHeaderClasses:"width_percent_50"},{id:"label",label:e("Security label"),type:"text",editable:!0,cellHeaderClasses:"override_label_class_font_size"}],validate:function(){if(this.errorModel.clear(),o.isUndefined(this.get("label"))||o.isNull(this.get("label"))||""==String(this.get("label")).replace(/^\s+|\s+$/g,"")){var t=e("Security label must be specified.");return this.errorModel.set("label",t),t}return null}}),s.Browser.Nodes.server=s.Browser.Node.extend({parent_type:"server_group",type:"server",dialogHelp:t("help.static",{filename:"server_dialog.html"}),label:e("Server"),canDrop:function(e){var t=e.user_id;return!(t!=u.id&&!o.isUndefined(t))},dropAsRemove:!0,dropPriority:5,hasStatistics:!0,hasCollectiveStatistics:!0,can_expand:function(e){return e&&e.connected},Init:function(){this.initialized||(this.initialized=!0,d.add_menus([{name:"create_server_on_sg",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"register",priority:1,label:e("Server..."),data:{action:"create"},icon:"wcTabIcon icon-server",enable:"canCreate"},{name:"create_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"register",priority:3,label:e("Server..."),data:{action:"create"},icon:"wcTabIcon icon-server",enable:"canCreate"},{name:"connect_server",node:"server",module:this,applies:["object","context"],callback:"connect_server",category:"connect",priority:4,label:e("Connect Server"),icon:"fa fa-link",enable:"is_not_connected",data:{data_disabled:e("Database server is already connected.")}},{name:"disconnect_server",node:"server",module:this,applies:["object","context"],callback:"disconnect_server",category:"drop",priority:5,label:e("Disconnect from server"),icon:"fa fa-unlink",enable:"is_connected",data:{data_disabled:e("Database server is already disconnected.")}},{name:"reload_configuration",node:"server",module:this,applies:["tools","context"],callback:"reload_configuration",category:"reload",priority:10,label:e("Reload Configuration"),icon:"fa fa-redo-alt",enable:"enable_reload_config",data:{data_disabled:e("Please select a server from the browser tree to reload the configuration files.")}},{name:"restore_point",node:"server",module:this,applies:["tools","context"],callback:"restore_point",category:"restore",priority:7,label:e("Add Named Restore Point..."),icon:"fa fa-anchor",enable:"is_applicable",data:{data_disabled:e("Please select any server from the browser tree to Add Named Restore Point.")}},{name:"change_password",node:"server",module:this,applies:["object"],callback:"change_password",label:e("Change Password..."),priority:10,icon:"fa fa-lock",enable:"is_connected",data:{data_disabled:e("Please connect server to enable change password.")}},{name:"wal_replay_pause",node:"server",module:this,applies:["tools","context"],callback:"pause_wal_replay",category:"wal_replay_pause",priority:8,label:e("Pause Replay of WAL"),icon:"fa fa-pause-circle",enable:"wal_pause_enabled",data:{data_disabled:e("Please select a connected database as a Super user and run in Recovery mode to Pause Replay of WAL.")}},{name:"wal_replay_resume",node:"server",module:this,applies:["tools","context"],callback:"resume_wal_replay",category:"wal_replay_resume",priority:9,label:e("Resume Replay of WAL"),icon:"fa fa-play-circle",enable:"wal_resume_enabled",data:{data_disabled:e("Please select a connected database as a Super user and run in Recovery mode to Resume Replay of WAL.")}},{name:"clear_saved_password",node:"server",module:this,applies:["object","context"],callback:"clear_saved_password",label:e("Clear Saved Password"),icon:"fa fa-eraser",priority:11,enable:function(e){return!(!e||"server"!==e._type||!e.is_password_saved)}},{name:"clear_sshtunnel_password",node:"server",module:this,applies:["object","context"],callback:"clear_sshtunnel_password",label:e("Clear SSH Tunnel Password"),icon:"fa fa-eraser",priority:12,enable:function(e){return!(!e||"server"!==e._type||!e.is_tunnel_password_saved)},data:{data_disabled:e("SSH Tunnel password is not saved for selected server.")}}]),o.bindAll(this,"connection_lost"),d.Events.on("pgadmin:server:connection:lost",this.connection_lost))},is_not_connected:function(e){return e&&1!=e.connected},canCreate:function(e){var t=e.user_id;return!(t!=u.id&&!o.isUndefined(t))},is_connected:function(e){return e&&1==e.connected},enable_reload_config:function(e){return!!(e&&"server"==e._type&&e.connected&&e.user.is_superuser)},is_applicable:function(e){return!!(e&&"server"==e._type&&e.connected&&e.user.is_superuser&&0==e.in_recovery)},wal_pause_enabled:function(e){return!!(e&&"server"==e._type&&e.connected&&e.user.is_superuser&&1==e.in_recovery&&0==e.wal_pause)},wal_resume_enabled:function(e){return!!(e&&"server"==e._type&&e.connected&&e.user.is_superuser&&1==e.in_recovery&&1==e.wal_pause)},callbacks:{connect_server:function(e){var t=e||{},a=d.tree,o=t.item||a.selected(),n=o?a.itemData(o):void 0;return n&&f(this,n,a,o,!1),!1},disconnect_server:function(t,n){var r=t||{},i=this,l=d.tree,u="item"in r?r.item:l.selected(),p=u?l.itemData(u):void 0;if(p){n=n||o.isUndefined(n)||o.isNull(n);var m=function(){a.ajax({url:i.generate_url(u,"connect",p,!0),type:"DELETE"}).done((function(e){if(1==e.success)if(c.default.success(e.info),p=l.itemData(u),l.removeIcon(u),p.connected=!1,p.shared&&"True"==s.server_mode?p.icon="icon-shared-server-not-connected":p.icon="icon-server-not-connected",l.addIcon(u,{icon:p.icon}),i.callbacks.refresh.apply(i,[null,u]),setTimeout((function(){l.close(u)}),10),d.serverInfo&&p._id in d.serverInfo)delete d.serverInfo[p._id];else{try{c.default.error(e.errormsg)}catch(e){console.warn(e.stack||e)}l.unload(u)}})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),l.unload(u)}))};n?c.default.confirm(e("Disconnect from server"),e("Are you sure you want to disconnect from the server %s?",p.label),(function(){m()}),(function(){return!0})):m()}return!1},beforeopen:function(e,t){return!(!t||"server"!=t._type)&&(d.tree.addIcon(e,{icon:t.icon}),!!t.connected||(f(this,t,d.tree,e,!1),!1))},added:function(e,t){return d.serverInfo=d.serverInfo||{},d.serverInfo[t._id]=o.extend({},t),s.Browser.Node.callbacks.added.apply(this,arguments),t.was_connected&&b(this,t,d.tree,e),!0},reload_configuration:function(t){var o=t||{},n=this,r=d.tree,i=o.item||r.selected(),l=i?r.itemData(i):void 0;return l&&c.default.confirm(e("Reload server configuration"),e("Are you sure you want to reload the server configuration on %s?",l.label),(function(){a.ajax({url:n.generate_url(i,"reload",l,!0),method:"GET"}).done((function(e){e.data.status?c.default.success(e.data.result):c.default.error(e.data.result)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),r.unload(i)}))}),(function(){return!0})),!1},restore_point:function(t){var n=t||{},r=this,i=d.tree,l=n.item||i.selected(),s=l?i.itemData(l):void 0;if(!s)return!1;p.prompt(e("Enter the name of the restore point to add"),"",(function(t,n){o.isUndefined(n)||o.isNull(n)||""===n||""===String(n).replace(/^\s+|\s+$/g,"")?(t.cancel=!0,c.default.error(e("Please enter a valid name."),1e4)):a.ajax({url:r.generate_url(l,"restore_point",s,!0),method:"POST",data:{value:JSON.stringify(n)}}).done((function(e){c.default.success(e.data.result,1e4)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),i.unload(l)}))}),(function(e){e.cancel=!1})).set({title:e("Restore point name")})},change_password:function(t){var r=t||{},i=d.tree,l=r.item||i.selected(),s=l?i.itemData(l):void 0,u=this.generate_url(l,"change_password",s,!0),_=!1,f=this.generate_url(l,"check_pgpass",s,!0);if(s){if(!p.changeServerPassword){var b=n.Model.extend({defaults:{user_name:void 0,password:void 0,newPassword:void 0,confirmPassword:void 0},validate:function(){return null}}),h=[{name:"user_name",label:e("User"),type:"text",readonly:!0,control:"input"},{name:"password",label:e("Current Password"),type:"password",disabled:function(){return _},control:"input",required:!0},{name:"newPassword",label:e("New Password"),type:"password",disabled:!1,control:"input",required:!0},{name:"confirmPassword",label:e("Confirm Password"),type:"password",disabled:!1,control:"input",required:!0}];p.dialog("changeServerPassword",(function(){return{main:function(t){var a=e("Change Password");this.set("title",a),this.user_name=t.user.name},setup:function(){return{buttons:[{text:e("Cancel"),key:27,className:"btn btn-secondary fa fa-times pg-alertify-button",attrs:{name:"cancel"}},{text:e("OK"),key:13,className:"btn btn-primary fa fa-check pg-alertify-button",attrs:{name:"submit"}}],options:{padding:!1,overflow:!1,modal:!1,resizable:!0,maximizable:!0,pinnable:!1,closableByDimmer:!1}}},hooks:{onclose:function(){this.view&&this.view.remove({data:!0,internal:!0,silent:!0})}},prepare:function(){var t=this;this.__internal.buttons[1].element.disabled=!0;var n=a("<div class='change_password'></div>"),r=new b({user_name:t.user_name});(this.view=new m.Form({el:n,model:r,fields:h})).render(),this.elements.content.appendChild(n.get(0)),this.view.model.on("change",(function(){var a=this,n=this.get("password"),r=this.get("newPassword"),i=this.get("confirmPassword");!_&&(o.isUndefined(n)||o.isNull(n)||""==n)||o.isUndefined(r)||o.isNull(r)||""==r||o.isUndefined(i)||o.isNull(i)||""==i?t.__internal.buttons[1].element.disabled=!0:r!=i?(t.__internal.buttons[1].element.disabled=!0,this.errorTimeout&&clearTimeout(this.errorTimeout),this.errorTimeout=setTimeout((function(){a.errorModel.set("confirmPassword",e("Passwords do not match."))}),400)):(a.errorModel.clear(),t.__internal.buttons[1].element.disabled=!1)}))},callback:function(t){if("submit"==t.button.element.name){var o=this,n=this.view.model.toJSON();t.cancel=!0,a.ajax({url:u,method:"POST",data:{data:JSON.stringify(n)}}).done((function(t){t.success?(_&&c.default.alert(e("Change Password"),e("Please make sure to disconnect the server and update the new password in the pgpass file before performing any other operation")),c.default.success(t.info),o.close()):c.default.error(t.errormsg)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a)}))}}}}))}a.ajax({url:f,method:"GET"}).done((function(e){e.success&&e.data.is_pgpass&&(_=!0),p.changeServerPassword(s).resizeTo("40%","52%")})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a)}))}return!1},on_done:function(e,t,a){1==e.success&&(c.default.success(e.info),t.itemData(a).wal_pause=e.data.wal_pause,t.unload(a),t.setInode(a),t.deselect(a),setTimeout((function(){t.select(a)}),10))},pause_wal_replay:function(e){var t=e||{},o=this,n=d.tree,r=t.item||n.selected(),i=r?n.itemData(r):void 0;if(!i)return!1;a.ajax({url:o.generate_url(r,"wal_replay",i,!0),type:"DELETE",dataType:"json"}).done((function(e){o.on_done(e,n,r)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),n.unload(r)}))},resume_wal_replay:function(e){var t=e||{},o=this,n=d.tree,r=t.item||n.selected(),i=r?n.itemData(r):void 0;if(!i)return!1;a.ajax({url:o.generate_url(r,"wal_replay",i,!0),type:"PUT",dataType:"json"}).done((function(e){o.on_done(e,n,r)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),n.unload(r)}))},clear_saved_password:function(t){var o=t||{},n=this,r=d.tree,i=o.item||r.selected(),l=i?r.itemData(i):void 0;return l&&c.default.confirm(e("Clear saved password"),e("Are you sure you want to clear the saved password for server %s?",l.label),(function(){a.ajax({url:n.generate_url(i,"clear_saved_password",l,!0),method:"PUT"}).done((function(e){1==e.success?(c.default.success(e.info),r.itemData(i).is_password_saved=e.data.is_password_saved):c.default.error(e.info)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a)}))}),(function(){return!0})),!1},clear_sshtunnel_password:function(t){var o=t||{},n=this,r=d.tree,i=o.item||r.selected(),l=i?r.itemData(i):void 0;return l&&c.default.confirm(e("Clear SSH Tunnel password"),e("Are you sure you want to clear the saved password of SSH Tunnel for server %s?",l.label),(function(){a.ajax({url:n.generate_url(i,"clear_sshtunnel_password",l,!0),method:"PUT"}).done((function(e){1==e.success?(c.default.success(e.info),r.itemData(i).is_tunnel_password_saved=e.data.is_tunnel_password_saved):c.default.error(e.info)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a)}))}),(function(){return!0})),!1},server_psql_tool:function(e){var t=e||{},a=d.tree,o=t.item||a.selected(),n=o?a.itemData(o):void 0;d.psql.psql_tool(n,o,!0)}},getSchema:function(e,t){return new i.default((0,r.getNodeListById)(d.Nodes.server_group,e,t),t.user_id,{gid:e.server_group._id})},connection_lost:function(t,a){if(d.tree){for(var n=d.tree,r=t&&n.itemData(t),i=this;r&&"server"!=r._type;)t=n.parent(t),r=t&&n.itemData(t);if(t&&r&&"server"==r._type&&(o.isUndefined(r.is_connecting)||!r.is_connecting)){r.is_connecting=!0;d.Events.on("pgadmin:server:connect:cancelled",(function e(o){r._id==o&&(r.is_connecting=!1,d.Events.off("pgadmin:server:connect:cancelled",e),d.Events.trigger("pgadmin:database:connect:cancelled",o,a.data.database||r.db),d.Events.trigger("pgadmin:server:disconnect",{item:t,data:r},!1))})),c.default.confirm(e("Connection lost"),e("Would you like to reconnect to the database?"),(function(){f(i,r,n,t,!0)}),(function(){r.is_connecting=!1,n.unload(t),n.setInode(t),n.addIcon(t,{icon:"icon-database-not-connected"}),d.Events.trigger("pgadmin:server:connect:cancelled",t,r,i),n.select(t)}))}}}});var f=function n(r,i,p,m,f){var b=r.generate_url(m,"obj",i,!0);a.get(b).done((function(e){e.shared&&o.isNull(e.username)&&i.user_id!=u.id?e.service?(i.is_connecting=!1,p.unload(m),p.setInode(m),p.addIcon(m,{icon:"icon-shared-server-not-connected"})):(s.Browser.Node.callbacks.show_obj_properties.call(s.Browser.Nodes[p.itemData(m)._type],{action:"edit"}),i.is_connecting=!1,p.unload(m),p.setInode(m),p.addIcon(m,{icon:"icon-shared-server-not-connected"}),c.default.info("Please enter the server details to connect to the server. This server is a shared server.")):-1==e.cloud_status&&a.ajax({type:"GET",timeout:3e4,url:t("cloud.update_cloud_process",{sid:e.id}),cache:!1,async:!0,contentType:"application/json"}).done((function(){s.Browser.BackgroundProcessObsorver.update_process_list()})).fail((function(){console.warn(arguments)}))})).always((function(){i.is_connecting=!1}));var h=f||i.connected,g=function t(a,o,r,d,u,m,f,b){(i.connected=!1,b||(p.close(f),u.shared&&"True"==s.server_mode?p.addIcon(f,{icon:"icon-shared-server-not-connected"}):p.addIcon(f,{icon:"icon-server-not-connected"})),200!=a.status&&-1!==a.responseText.search("Ticket expired"))?(p.addIcon(f,{icon:"icon-server-connecting"}),_.fetch_ticket().then((function(){n(d,u,m,f,b)}),(function(){p.addIcon(f,{icon:"icon-server-not-connected"}),c.default.pgNotifier("Connection error",a,e("Connect to server."))}))):c.default.pgNotifier("error",a,r,(function(a){setTimeout((function(){"CRYPTKEY_SET"==a?n(d,u,m,f,b):"CRYPTKEY_NOT_SET"!=a&&(0,l.showServerPassword)(e("Connect to Server"),a,d,u,m,f,b,y,t,v)}),100)}))},y=function(t,a,n,i,l,s){t&&t.data&&("string"==typeof t.data.icon&&(i.removeIcon(l),n.icon=t.data.icon,i.addIcon(l,{icon:n.icon})),o.extend(n,t.data),n.is_connecting=!1,(d.serverInfo=d.serverInfo||{})[n._id]=o.extend({},n),n.version<90500?c.default.warning(e("You have connected to a server version that is older than is supported by pgAdmin. This may cause pgAdmin to break in strange and unpredictable ways. Or a plague of frogs. Either way, you have been warned!")+"<br /><br />"+t.info,null):c.default.success(t.info),r.trigger("connected",r,l,n),d.Events.trigger("pgadmin:server:connected",n._id,l,n),d.Events.trigger("pgadmin:database:connected",n._id,n.db,l,n),d.Events.trigger("pgadmin-browser:tree:selected",l,n,a),d.enable_disable_menus.apply(d,[l]),s?setTimeout((function(){a.callbacks.refresh.apply(a,[!0])}),10):(i.setInode(l),setTimeout((function(){i.select(l),i.open(l)}),10)))},v=function(e,t,a,o){a.is_connecting=!1,e.unload(t),e.setInode(t),e.removeIcon(t),a.shared&&"True"==s.server_mode?e.addIcon(t,{icon:"icon-shared-server-not-connected"}):e.addIcon(t,{icon:"icon-server-not-connected"}),r.trigger("connect:cancelled",i._id,i.db,r,t,a),d.Events.trigger("pgadmin:server:connect:cancelled",i._id,t,a,r),d.Events.trigger("pgadmin:database:connect:cancelled",i._id,i.db,t,a,r),o&&e.select(t)};if(!i.is_connecting&&-1!=i.cloud_status){i.is_connecting=!0,p.setLeaf(m),p.removeIcon(m),p.addIcon(m,{icon:"icon-server-connecting"});var w=r.generate_url(m,"connect",i,!0);a.post(w).done((function(e){if(1==e.success)return y(e,r,i,p,m,h)})).fail((function(e,t,a){return g(e,0,a,r,i,p,m,h)})).always((function(){i.is_connecting=!1}))}},b=function(e,t,n,r){var i=e.generate_url(r,"connect",t,!0);n.setLeaf(r),n.removeIcon(r),n.addIcon(r,{icon:"icon-server-connecting"}),a.get(i).done((function(e){(n.setInode(r),e&&e.data)&&("string"==typeof e.data.icon&&(n.removeIcon(r),t.icon=e.data.icon,n.addIcon(r,{icon:t.icon})),o.extend(t,e.data),(d.serverInfo=d.serverInfo||{})[t._id]=o.extend({},t),t.errmsg&&c.default.error(t.errmsg))})).fail((function(e,a,o){n.setInode(r),t.shared&&"True"==s.server_mode?n.addIcon(r,{icon:"icon-shared-server-not-connected"}):n.addIcon(r,{icon:"icon-server-not-connected"}),c.default.pgRespErrorNotify(e,o)}))}}return d.Nodes.server}.apply(t,o))||(e.exports=n)},71085:(e,t,a)=>{var o,n;a(68309);var r,i=a(77077),c=a(40345),l=a(14511),s=(r=a(81051))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(72316),a(55112),a(33883),a(5547),a(75270),a(63563)],void 0===(n=function(e,t,a,o,n,r,d){return d.Nodes["coll-tablespace"]||(d.Nodes["coll-tablespace"]=d.Collection.extend({node:"tablespace",label:e("Tablespaces"),type:"coll-tablespace",columns:["name","spcuser","description"],hasStatistics:!0,statsPrettifyFields:[e("Size")],canDrop:!0,canDropCascade:!1})),d.Nodes.tablespace||(d.Nodes.tablespace=d.Node.extend({parent_type:"server",type:"tablespace",sqlAlterHelp:"sql-altertablespace.html",sqlCreateHelp:"sql-createtablespace.html",dialogHelp:t("help.static",{filename:"tablespace_dialog.html"}),label:e("Tablespace"),hasSQL:!0,canDrop:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size")],Init:function(){this.initialized||(this.initialized=!0,d.add_menus([{name:"create_tablespace_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace_on_coll",node:"coll-tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace",node:"tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"}]))},can_create_tablespace:function(e,t){var a=d.tree.getTreeNodeHierarchy(t).server;return a.connected&&a.user.is_superuser},callbacks:{},getSchema:function(e,t){var a=this;return new s.default((function(){return(0,l.getNodeVariableSchema)(a,e,t,!1,!1)}),(function(o){return(0,c.getNodePrivilegeRoleSchema)(a,e,t,o)}),{role:function(){return(0,i.getNodeListByName)("role",e,t)}},{spcuser:d.serverInfo[e.server._id].user.name})},model:d.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var a=0===o.size(e);if(a){var n=d.serverInfo[t.node_info.server._id].user;this.set({spcuser:n.name},{silent:!0})}d.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"spcuser",label:e("Owner"),cell:"string",type:"text",control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{id:"description",label:e("Comment"),cell:"string",type:"multiline"}]})})),d.Nodes["coll-tablespace"]}.apply(t,o))||(e.exports=n)},57455:(e,t,a)=>{var o,n,r,i=(r=a(46675))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(19755),a(66419),a(55112),a(93584),a(33883),a(66235)],void 0===(n=function(e,t,a,o,n,r){return n.Browser.Nodes.server_group||(n.Browser.Nodes.server_group=n.Browser.Node.extend({parent_type:null,type:"server_group",dialogHelp:t("help.static",{filename:"server_group_dialog.html"}),label:e("Server Group"),width:"250px",height:"150px",is_collection:!0,Init:function(){this.initialized||(this.initialized=!0,n.Browser.add_menus([{name:"create_server_group",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Server Group..."),data:{action:"create"},icon:"wcTabIcon icon-server_group"}]))},getSchema:function(){return new i.default},canDrop:function(e){var t=e.user_id;return!(t!=r.id&&!o.isUndefined(t))},dropAsRemove:!0,canDelete:function(e){var t=n.Browser.tree.siblings(e,!0);return!(!t||0==t.length)}})),n.Browser.Nodes.server_group}.apply(t,o))||(e.exports=n)}}]);